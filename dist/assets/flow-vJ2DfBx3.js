import{e as Ar,g as xi,a as N,r as b}from"./vendor-D-ipv8NB.js";import{i as vi,a as On,b as _i,c as Yn,d as Ei,e as Si,f as bi}from"./charts-BEUfKJ7H.js";function it(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,r;n<t.length;n++)(r=it(t[n]))!==""&&(e+=(e&&" ")+r);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var qe={exports:{}},Qe={},Je={exports:{}},je={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Un;function Ni(){if(Un)return je;Un=1;var t=Ar();function e(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,o=t.useEffect,i=t.useLayoutEffect,s=t.useDebugValue;function c(f,h){var p=h(),v=r({inst:{value:p,getSnapshot:h}}),m=v[0].inst,_=v[1];return i(function(){m.value=p,m.getSnapshot=h,a(m)&&_({inst:m})},[f,p,h]),o(function(){return a(m)&&_({inst:m}),f(function(){a(m)&&_({inst:m})})},[f]),s(p),p}function a(f){var h=f.getSnapshot;f=f.value;try{var p=h();return!n(f,p)}catch{return!0}}function l(f,h){return h()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?l:c;return je.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:u,je}var Xn;function Ai(){return Xn||(Xn=1,Je.exports=Ni()),Je.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wn;function Ci(){if(Wn)return Qe;Wn=1;var t=Ar(),e=Ai();function n(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var r=typeof Object.is=="function"?Object.is:n,o=e.useSyncExternalStore,i=t.useRef,s=t.useEffect,c=t.useMemo,a=t.useDebugValue;return Qe.useSyncExternalStoreWithSelector=function(l,u,f,h,p){var v=i(null);if(v.current===null){var m={hasValue:!1,value:null};v.current=m}else m=v.current;v=c(function(){function g($){if(!E){if(E=!0,A=$,$=h($),p!==void 0&&m.hasValue){var R=m.value;if(p(R,$))return y=R}return y=$}if(R=y,r(A,$))return R;var H=h($);return p!==void 0&&p(R,H)?(A=$,R):(A=$,y=H)}var E=!1,A,y,M=f===void 0?null:f;return[function(){return g(u())},M===null?void 0:function(){return g(M())}]},[u,f,h,p]);var _=o(l,v[0],v[1]);return s(function(){m.hasValue=!0,m.value=_},[_]),a(_),_},Qe}var Gn;function Ti(){return Gn||(Gn=1,qe.exports=Ci()),qe.exports}var Mi=Ti();const $i=xi(Mi),zi={},Zn=t=>{let e;const n=new Set,r=(u,f)=>{const h=typeof u=="function"?u(e):u;if(!Object.is(h,e)){const p=e;e=f??(typeof h!="object"||h===null)?h:Object.assign({},e,h),n.forEach(v=>v(e,p))}},o=()=>e,a={setState:r,getState:o,getInitialState:()=>l,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(zi?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},l=e=t(r,o,a);return a},Ii=t=>t?Zn(t):Zn,{useDebugValue:ki}=N,{useSyncExternalStoreWithSelector:Di}=$i,Ri=t=>t;function Cr(t,e=Ri,n){const r=Di(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return ki(r),r}const Kn=(t,e)=>{const n=Ii(t),r=(o,i=e)=>Cr(n,o,i);return Object.assign(r,n),r},Pi=(t,e)=>t?Kn(t,e):Kn;function ot(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,o]of t)if(!Object.is(o,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(t[r],e[r]))return!1;return!0}var Hi={value:()=>{}};function Fe(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Me(n)}function Me(t){this._=t}function Vi(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Me.prototype=Fe.prototype={constructor:Me,on:function(t,e){var n=this._,r=Vi(t+"",n),o,i=-1,s=r.length;if(arguments.length<2){for(;++i<s;)if((o=(t=r[i]).type)&&(o=Bi(n[o],t.name)))return o;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++i<s;)if(o=(t=r[i]).type)n[o]=qn(n[o],t.name,e);else if(e==null)for(o in n)n[o]=qn(n[o],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Me(t)},call:function(t,e){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,i;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],o=0,i=r.length;o<i;++o)r[o].value.apply(e,n)}};function Bi(t,e){for(var n=0,r=t.length,o;n<r;++n)if((o=t[n]).name===e)return o.value}function qn(t,e,n){for(var r=0,o=t.length;r<o;++r)if(t[r].name===e){t[r]=Hi,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var an="http://www.w3.org/1999/xhtml";const Qn={svg:"http://www.w3.org/2000/svg",xhtml:an,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Oe(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Qn.hasOwnProperty(e)?{space:Qn[e],local:t}:t}function Li(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===an&&e.documentElement.namespaceURI===an?e.createElement(t):e.createElementNS(n,t)}}function Fi(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Tr(t){var e=Oe(t);return(e.local?Fi:Li)(e)}function Oi(){}function _n(t){return t==null?Oi:function(){return this.querySelector(t)}}function Yi(t){typeof t!="function"&&(t=_n(t));for(var e=this._groups,n=e.length,r=new Array(n),o=0;o<n;++o)for(var i=e[o],s=i.length,c=r[o]=new Array(s),a,l,u=0;u<s;++u)(a=i[u])&&(l=t.call(a,a.__data__,u,i))&&("__data__"in a&&(l.__data__=a.__data__),c[u]=l);return new ct(r,this._parents)}function Ui(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Xi(){return[]}function Mr(t){return t==null?Xi:function(){return this.querySelectorAll(t)}}function Wi(t){return function(){return Ui(t.apply(this,arguments))}}function Gi(t){typeof t=="function"?t=Wi(t):t=Mr(t);for(var e=this._groups,n=e.length,r=[],o=[],i=0;i<n;++i)for(var s=e[i],c=s.length,a,l=0;l<c;++l)(a=s[l])&&(r.push(t.call(a,a.__data__,l,s)),o.push(a));return new ct(r,o)}function $r(t){return function(){return this.matches(t)}}function zr(t){return function(e){return e.matches(t)}}var Zi=Array.prototype.find;function Ki(t){return function(){return Zi.call(this.children,t)}}function qi(){return this.firstElementChild}function Qi(t){return this.select(t==null?qi:Ki(typeof t=="function"?t:zr(t)))}var Ji=Array.prototype.filter;function ji(){return Array.from(this.children)}function ts(t){return function(){return Ji.call(this.children,t)}}function es(t){return this.selectAll(t==null?ji:ts(typeof t=="function"?t:zr(t)))}function ns(t){typeof t!="function"&&(t=$r(t));for(var e=this._groups,n=e.length,r=new Array(n),o=0;o<n;++o)for(var i=e[o],s=i.length,c=r[o]=[],a,l=0;l<s;++l)(a=i[l])&&t.call(a,a.__data__,l,i)&&c.push(a);return new ct(r,this._parents)}function Ir(t){return new Array(t.length)}function rs(){return new ct(this._enter||this._groups.map(Ir),this._parents)}function ke(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}ke.prototype={constructor:ke,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function os(t){return function(){return t}}function is(t,e,n,r,o,i){for(var s=0,c,a=e.length,l=i.length;s<l;++s)(c=e[s])?(c.__data__=i[s],r[s]=c):n[s]=new ke(t,i[s]);for(;s<a;++s)(c=e[s])&&(o[s]=c)}function ss(t,e,n,r,o,i,s){var c,a,l=new Map,u=e.length,f=i.length,h=new Array(u),p;for(c=0;c<u;++c)(a=e[c])&&(h[c]=p=s.call(a,a.__data__,c,e)+"",l.has(p)?o[c]=a:l.set(p,a));for(c=0;c<f;++c)p=s.call(t,i[c],c,i)+"",(a=l.get(p))?(r[c]=a,a.__data__=i[c],l.delete(p)):n[c]=new ke(t,i[c]);for(c=0;c<u;++c)(a=e[c])&&l.get(h[c])===a&&(o[c]=a)}function cs(t){return t.__data__}function as(t,e){if(!arguments.length)return Array.from(this,cs);var n=e?ss:is,r=this._parents,o=this._groups;typeof t!="function"&&(t=os(t));for(var i=o.length,s=new Array(i),c=new Array(i),a=new Array(i),l=0;l<i;++l){var u=r[l],f=o[l],h=f.length,p=us(t.call(u,u&&u.__data__,l,r)),v=p.length,m=c[l]=new Array(v),_=s[l]=new Array(v),g=a[l]=new Array(h);n(u,f,m,_,g,p,e);for(var E=0,A=0,y,M;E<v;++E)if(y=m[E]){for(E>=A&&(A=E+1);!(M=_[A])&&++A<v;);y._next=M||null}}return s=new ct(s,r),s._enter=c,s._exit=a,s}function us(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function ls(){return new ct(this._exit||this._groups.map(Ir),this._parents)}function fs(t,e,n){var r=this.enter(),o=this,i=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(o=e(o),o&&(o=o.selection())),n==null?i.remove():n(i),r&&o?r.merge(o).order():o}function ds(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,o=n.length,i=r.length,s=Math.min(o,i),c=new Array(o),a=0;a<s;++a)for(var l=n[a],u=r[a],f=l.length,h=c[a]=new Array(f),p,v=0;v<f;++v)(p=l[v]||u[v])&&(h[v]=p);for(;a<o;++a)c[a]=n[a];return new ct(c,this._parents)}function hs(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],o=r.length-1,i=r[o],s;--o>=0;)(s=r[o])&&(i&&s.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(s,i),i=s);return this}function ps(t){t||(t=gs);function e(f,h){return f&&h?t(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,o=new Array(r),i=0;i<r;++i){for(var s=n[i],c=s.length,a=o[i]=new Array(c),l,u=0;u<c;++u)(l=s[u])&&(a[u]=l);a.sort(e)}return new ct(o,this._parents).order()}function gs(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function ms(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function ys(){return Array.from(this)}function ws(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],o=0,i=r.length;o<i;++o){var s=r[o];if(s)return s}return null}function xs(){let t=0;for(const e of this)++t;return t}function vs(){return!this.node()}function _s(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var o=e[n],i=0,s=o.length,c;i<s;++i)(c=o[i])&&t.call(c,c.__data__,i,o);return this}function Es(t){return function(){this.removeAttribute(t)}}function Ss(t){return function(){this.removeAttributeNS(t.space,t.local)}}function bs(t,e){return function(){this.setAttribute(t,e)}}function Ns(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function As(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Cs(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Ts(t,e){var n=Oe(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?Ss:Es:typeof e=="function"?n.local?Cs:As:n.local?Ns:bs)(n,e))}function kr(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Ms(t){return function(){this.style.removeProperty(t)}}function $s(t,e,n){return function(){this.style.setProperty(t,e,n)}}function zs(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Is(t,e,n){return arguments.length>1?this.each((e==null?Ms:typeof e=="function"?zs:$s)(t,e,n??"")):ne(this.node(),t)}function ne(t,e){return t.style.getPropertyValue(e)||kr(t).getComputedStyle(t,null).getPropertyValue(e)}function ks(t){return function(){delete this[t]}}function Ds(t,e){return function(){this[t]=e}}function Rs(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Ps(t,e){return arguments.length>1?this.each((e==null?ks:typeof e=="function"?Rs:Ds)(t,e)):this.node()[t]}function Dr(t){return t.trim().split(/^|\s+/)}function En(t){return t.classList||new Rr(t)}function Rr(t){this._node=t,this._names=Dr(t.getAttribute("class")||"")}Rr.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Pr(t,e){for(var n=En(t),r=-1,o=e.length;++r<o;)n.add(e[r])}function Hr(t,e){for(var n=En(t),r=-1,o=e.length;++r<o;)n.remove(e[r])}function Hs(t){return function(){Pr(this,t)}}function Vs(t){return function(){Hr(this,t)}}function Bs(t,e){return function(){(e.apply(this,arguments)?Pr:Hr)(this,t)}}function Ls(t,e){var n=Dr(t+"");if(arguments.length<2){for(var r=En(this.node()),o=-1,i=n.length;++o<i;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof e=="function"?Bs:e?Hs:Vs)(n,e))}function Fs(){this.textContent=""}function Os(t){return function(){this.textContent=t}}function Ys(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Us(t){return arguments.length?this.each(t==null?Fs:(typeof t=="function"?Ys:Os)(t)):this.node().textContent}function Xs(){this.innerHTML=""}function Ws(t){return function(){this.innerHTML=t}}function Gs(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Zs(t){return arguments.length?this.each(t==null?Xs:(typeof t=="function"?Gs:Ws)(t)):this.node().innerHTML}function Ks(){this.nextSibling&&this.parentNode.appendChild(this)}function qs(){return this.each(Ks)}function Qs(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Js(){return this.each(Qs)}function js(t){var e=typeof t=="function"?t:Tr(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function tc(){return null}function ec(t,e){var n=typeof t=="function"?t:Tr(t),r=e==null?tc:typeof e=="function"?e:_n(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function nc(){var t=this.parentNode;t&&t.removeChild(this)}function rc(){return this.each(nc)}function oc(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ic(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function sc(t){return this.select(t?ic:oc)}function cc(t){return arguments.length?this.property("__data__",t):this.node().__data__}function ac(t){return function(e){t.call(this,e,this.__data__)}}function uc(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function lc(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,o=e.length,i;n<o;++n)i=e[n],(!t.type||i.type===t.type)&&i.name===t.name?this.removeEventListener(i.type,i.listener,i.options):e[++r]=i;++r?e.length=r:delete this.__on}}}function fc(t,e,n){return function(){var r=this.__on,o,i=ac(e);if(r){for(var s=0,c=r.length;s<c;++s)if((o=r[s]).type===t.type&&o.name===t.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=n),o.value=e;return}}this.addEventListener(t.type,i,n),o={type:t.type,name:t.name,value:e,listener:i,options:n},r?r.push(o):this.__on=[o]}}function dc(t,e,n){var r=uc(t+""),o,i=r.length,s;if(arguments.length<2){var c=this.node().__on;if(c){for(var a=0,l=c.length,u;a<l;++a)for(o=0,u=c[a];o<i;++o)if((s=r[o]).type===u.type&&s.name===u.name)return u.value}return}for(c=e?fc:lc,o=0;o<i;++o)this.each(c(r[o],e,n));return this}function Vr(t,e,n){var r=kr(t),o=r.CustomEvent;typeof o=="function"?o=new o(e,n):(o=r.document.createEvent("Event"),n?(o.initEvent(e,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(e,!1,!1)),t.dispatchEvent(o)}function hc(t,e){return function(){return Vr(this,t,e)}}function pc(t,e){return function(){return Vr(this,t,e.apply(this,arguments))}}function gc(t,e){return this.each((typeof e=="function"?pc:hc)(t,e))}function*mc(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],o=0,i=r.length,s;o<i;++o)(s=r[o])&&(yield s)}var Br=[null];function ct(t,e){this._groups=t,this._parents=e}function _e(){return new ct([[document.documentElement]],Br)}function yc(){return this}ct.prototype=_e.prototype={constructor:ct,select:Yi,selectAll:Gi,selectChild:Qi,selectChildren:es,filter:ns,data:as,enter:rs,exit:ls,join:fs,merge:ds,selection:yc,order:hs,sort:ps,call:ms,nodes:ys,node:ws,size:xs,empty:vs,each:_s,attr:Ts,style:Is,property:Ps,classed:Ls,text:Us,html:Zs,raise:qs,lower:Js,append:js,insert:ec,remove:rc,clone:sc,datum:cc,on:dc,dispatch:gc,[Symbol.iterator]:mc};function pt(t){return typeof t=="string"?new ct([[document.querySelector(t)]],[document.documentElement]):new ct([[t]],Br)}function wc(t){let e;for(;e=t.sourceEvent;)t=e;return t}function xt(t,e){if(t=wc(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var o=e.getBoundingClientRect();return[t.clientX-o.left-e.clientLeft,t.clientY-o.top-e.clientTop]}}return[t.pageX,t.pageY]}const xc={passive:!1},ye={capture:!0,passive:!1};function tn(t){t.stopImmediatePropagation()}function jt(t){t.preventDefault(),t.stopImmediatePropagation()}function Lr(t){var e=t.document.documentElement,n=pt(t).on("dragstart.drag",jt,ye);"onselectstart"in e?n.on("selectstart.drag",jt,ye):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Fr(t,e){var n=t.document.documentElement,r=pt(t).on("dragstart.drag",null);e&&(r.on("click.drag",jt,ye),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Se=t=>()=>t;function un(t,{sourceEvent:e,subject:n,target:r,identifier:o,active:i,x:s,y:c,dx:a,dy:l,dispatch:u}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:c,enumerable:!0,configurable:!0},dx:{value:a,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:u}})}un.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function vc(t){return!t.ctrlKey&&!t.button}function _c(){return this.parentNode}function Ec(t,e){return e??{x:t.x,y:t.y}}function Sc(){return navigator.maxTouchPoints||"ontouchstart"in this}function bc(){var t=vc,e=_c,n=Ec,r=Sc,o={},i=Fe("start","drag","end"),s=0,c,a,l,u,f=0;function h(y){y.on("mousedown.drag",p).filter(r).on("touchstart.drag",_).on("touchmove.drag",g,xc).on("touchend.drag touchcancel.drag",E).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(y,M){if(!(u||!t.call(this,y,M))){var $=A(this,e.call(this,y,M),y,M,"mouse");$&&(pt(y.view).on("mousemove.drag",v,ye).on("mouseup.drag",m,ye),Lr(y.view),tn(y),l=!1,c=y.clientX,a=y.clientY,$("start",y))}}function v(y){if(jt(y),!l){var M=y.clientX-c,$=y.clientY-a;l=M*M+$*$>f}o.mouse("drag",y)}function m(y){pt(y.view).on("mousemove.drag mouseup.drag",null),Fr(y.view,l),jt(y),o.mouse("end",y)}function _(y,M){if(t.call(this,y,M)){var $=y.changedTouches,R=e.call(this,y,M),H=$.length,z,B;for(z=0;z<H;++z)(B=A(this,R,y,M,$[z].identifier,$[z]))&&(tn(y),B("start",y,$[z]))}}function g(y){var M=y.changedTouches,$=M.length,R,H;for(R=0;R<$;++R)(H=o[M[R].identifier])&&(jt(y),H("drag",y,M[R]))}function E(y){var M=y.changedTouches,$=M.length,R,H;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),R=0;R<$;++R)(H=o[M[R].identifier])&&(tn(y),H("end",y,M[R]))}function A(y,M,$,R,H,z){var B=i.copy(),P=xt(z||$,M),L,V,d;if((d=n.call(y,new un("beforestart",{sourceEvent:$,target:h,identifier:H,active:s,x:P[0],y:P[1],dx:0,dy:0,dispatch:B}),R))!=null)return L=d.x-P[0]||0,V=d.y-P[1]||0,function S(x,T,I){var w=P,C;switch(x){case"start":o[H]=S,C=s++;break;case"end":delete o[H],--s;case"drag":P=xt(I||T,M),C=s;break}B.call(x,y,new un(x,{sourceEvent:T,subject:d,target:h,identifier:H,active:C,x:P[0]+L,y:P[1]+V,dx:P[0]-w[0],dy:P[1]-w[1],dispatch:B}),R)}}return h.filter=function(y){return arguments.length?(t=typeof y=="function"?y:Se(!!y),h):t},h.container=function(y){return arguments.length?(e=typeof y=="function"?y:Se(y),h):e},h.subject=function(y){return arguments.length?(n=typeof y=="function"?y:Se(y),h):n},h.touchable=function(y){return arguments.length?(r=typeof y=="function"?y:Se(!!y),h):r},h.on=function(){var y=i.on.apply(i,arguments);return y===i?h:y},h.clickDistance=function(y){return arguments.length?(f=(y=+y)*y,h):Math.sqrt(f)},h}var re=0,pe=0,ue=0,Or=1e3,De,ge,Re=0,Ft=0,Ye=0,we=typeof performance=="object"&&performance.now?performance:Date,Yr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Sn(){return Ft||(Yr(Nc),Ft=we.now()+Ye)}function Nc(){Ft=0}function Pe(){this._call=this._time=this._next=null}Pe.prototype=Ur.prototype={constructor:Pe,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Sn():+n)+(e==null?0:+e),!this._next&&ge!==this&&(ge?ge._next=this:De=this,ge=this),this._call=t,this._time=n,ln()},stop:function(){this._call&&(this._call=null,this._time=1/0,ln())}};function Ur(t,e,n){var r=new Pe;return r.restart(t,e,n),r}function Ac(){Sn(),++re;for(var t=De,e;t;)(e=Ft-t._time)>=0&&t._call.call(void 0,e),t=t._next;--re}function Jn(){Ft=(Re=we.now())+Ye,re=pe=0;try{Ac()}finally{re=0,Tc(),Ft=0}}function Cc(){var t=we.now(),e=t-Re;e>Or&&(Ye-=e,Re=t)}function Tc(){for(var t,e=De,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:De=n);ge=t,ln(r)}function ln(t){if(!re){pe&&(pe=clearTimeout(pe));var e=t-Ft;e>24?(t<1/0&&(pe=setTimeout(Jn,t-we.now()-Ye)),ue&&(ue=clearInterval(ue))):(ue||(Re=we.now(),ue=setInterval(Cc,Or)),re=1,Yr(Jn))}}function jn(t,e,n){var r=new Pe;return e=e==null?0:+e,r.restart(o=>{r.stop(),t(o+e)},e,n),r}var Mc=Fe("start","end","cancel","interrupt"),$c=[],Xr=0,tr=1,fn=2,$e=3,er=4,dn=5,ze=6;function Ue(t,e,n,r,o,i){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;zc(t,n,{name:e,index:r,group:o,on:Mc,tween:$c,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:Xr})}function bn(t,e){var n=mt(t,e);if(n.state>Xr)throw new Error("too late; already scheduled");return n}function vt(t,e){var n=mt(t,e);if(n.state>$e)throw new Error("too late; already running");return n}function mt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function zc(t,e,n){var r=t.__transition,o;r[e]=n,n.timer=Ur(i,0,n.time);function i(l){n.state=tr,n.timer.restart(s,n.delay,n.time),n.delay<=l&&s(l-n.delay)}function s(l){var u,f,h,p;if(n.state!==tr)return a();for(u in r)if(p=r[u],p.name===n.name){if(p.state===$e)return jn(s);p.state===er?(p.state=ze,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete r[u]):+u<e&&(p.state=ze,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete r[u])}if(jn(function(){n.state===$e&&(n.state=er,n.timer.restart(c,n.delay,n.time),c(l))}),n.state=fn,n.on.call("start",t,t.__data__,n.index,n.group),n.state===fn){for(n.state=$e,o=new Array(h=n.tween.length),u=0,f=-1;u<h;++u)(p=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(o[++f]=p);o.length=f+1}}function c(l){for(var u=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(a),n.state=dn,1),f=-1,h=o.length;++f<h;)o[f].call(t,u);n.state===dn&&(n.on.call("end",t,t.__data__,n.index,n.group),a())}function a(){n.state=ze,n.timer.stop(),delete r[e];for(var l in r)return;delete t.__transition}}function Ie(t,e){var n=t.__transition,r,o,i=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((r=n[s]).name!==e){i=!1;continue}o=r.state>fn&&r.state<dn,r.state=ze,r.timer.stop(),r.on.call(o?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[s]}i&&delete t.__transition}}function Ic(t){return this.each(function(){Ie(this,t)})}function kc(t,e){var n,r;return function(){var o=vt(this,t),i=o.tween;if(i!==n){r=n=i;for(var s=0,c=r.length;s<c;++s)if(r[s].name===e){r=r.slice(),r.splice(s,1);break}}o.tween=r}}function Dc(t,e,n){var r,o;if(typeof n!="function")throw new Error;return function(){var i=vt(this,t),s=i.tween;if(s!==r){o=(r=s).slice();for(var c={name:e,value:n},a=0,l=o.length;a<l;++a)if(o[a].name===e){o[a]=c;break}a===l&&o.push(c)}i.tween=o}}function Rc(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=mt(this.node(),n).tween,o=0,i=r.length,s;o<i;++o)if((s=r[o]).name===t)return s.value;return null}return this.each((e==null?kc:Dc)(n,t,e))}function Nn(t,e,n){var r=t._id;return t.each(function(){var o=vt(this,r);(o.value||(o.value={}))[e]=n.apply(this,arguments)}),function(o){return mt(o,r).value[e]}}function Wr(t,e){var n;return(typeof e=="number"?vi:e instanceof Yn?On:(n=Yn(e))?(e=n,On):_i)(t,e)}function Pc(t){return function(){this.removeAttribute(t)}}function Hc(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Vc(t,e,n){var r,o=n+"",i;return function(){var s=this.getAttribute(t);return s===o?null:s===r?i:i=e(r=s,n)}}function Bc(t,e,n){var r,o=n+"",i;return function(){var s=this.getAttributeNS(t.space,t.local);return s===o?null:s===r?i:i=e(r=s,n)}}function Lc(t,e,n){var r,o,i;return function(){var s,c=n(this),a;return c==null?void this.removeAttribute(t):(s=this.getAttribute(t),a=c+"",s===a?null:s===r&&a===o?i:(o=a,i=e(r=s,c)))}}function Fc(t,e,n){var r,o,i;return function(){var s,c=n(this),a;return c==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),a=c+"",s===a?null:s===r&&a===o?i:(o=a,i=e(r=s,c)))}}function Oc(t,e){var n=Oe(t),r=n==="transform"?Ei:Wr;return this.attrTween(t,typeof e=="function"?(n.local?Fc:Lc)(n,r,Nn(this,"attr."+t,e)):e==null?(n.local?Hc:Pc)(n):(n.local?Bc:Vc)(n,r,e))}function Yc(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Uc(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Xc(t,e){var n,r;function o(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&Uc(t,i)),n}return o._value=e,o}function Wc(t,e){var n,r;function o(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&Yc(t,i)),n}return o._value=e,o}function Gc(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Oe(t);return this.tween(n,(r.local?Xc:Wc)(r,e))}function Zc(t,e){return function(){bn(this,t).delay=+e.apply(this,arguments)}}function Kc(t,e){return e=+e,function(){bn(this,t).delay=e}}function qc(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Zc:Kc)(e,t)):mt(this.node(),e).delay}function Qc(t,e){return function(){vt(this,t).duration=+e.apply(this,arguments)}}function Jc(t,e){return e=+e,function(){vt(this,t).duration=e}}function jc(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Qc:Jc)(e,t)):mt(this.node(),e).duration}function ta(t,e){if(typeof e!="function")throw new Error;return function(){vt(this,t).ease=e}}function ea(t){var e=this._id;return arguments.length?this.each(ta(e,t)):mt(this.node(),e).ease}function na(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;vt(this,t).ease=n}}function ra(t){if(typeof t!="function")throw new Error;return this.each(na(this._id,t))}function oa(t){typeof t!="function"&&(t=$r(t));for(var e=this._groups,n=e.length,r=new Array(n),o=0;o<n;++o)for(var i=e[o],s=i.length,c=r[o]=[],a,l=0;l<s;++l)(a=i[l])&&t.call(a,a.__data__,l,i)&&c.push(a);return new Nt(r,this._parents,this._name,this._id)}function ia(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,o=n.length,i=Math.min(r,o),s=new Array(r),c=0;c<i;++c)for(var a=e[c],l=n[c],u=a.length,f=s[c]=new Array(u),h,p=0;p<u;++p)(h=a[p]||l[p])&&(f[p]=h);for(;c<r;++c)s[c]=e[c];return new Nt(s,this._parents,this._name,this._id)}function sa(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function ca(t,e,n){var r,o,i=sa(e)?bn:vt;return function(){var s=i(this,t),c=s.on;c!==r&&(o=(r=c).copy()).on(e,n),s.on=o}}function aa(t,e){var n=this._id;return arguments.length<2?mt(this.node(),n).on.on(t):this.each(ca(n,t,e))}function ua(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function la(){return this.on("end.remove",ua(this._id))}function fa(t){var e=this._name,n=this._id;typeof t!="function"&&(t=_n(t));for(var r=this._groups,o=r.length,i=new Array(o),s=0;s<o;++s)for(var c=r[s],a=c.length,l=i[s]=new Array(a),u,f,h=0;h<a;++h)(u=c[h])&&(f=t.call(u,u.__data__,h,c))&&("__data__"in u&&(f.__data__=u.__data__),l[h]=f,Ue(l[h],e,n,h,l,mt(u,n)));return new Nt(i,this._parents,e,n)}function da(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Mr(t));for(var r=this._groups,o=r.length,i=[],s=[],c=0;c<o;++c)for(var a=r[c],l=a.length,u,f=0;f<l;++f)if(u=a[f]){for(var h=t.call(u,u.__data__,f,a),p,v=mt(u,n),m=0,_=h.length;m<_;++m)(p=h[m])&&Ue(p,e,n,m,h,v);i.push(h),s.push(u)}return new Nt(i,s,e,n)}var ha=_e.prototype.constructor;function pa(){return new ha(this._groups,this._parents)}function ga(t,e){var n,r,o;return function(){var i=ne(this,t),s=(this.style.removeProperty(t),ne(this,t));return i===s?null:i===n&&s===r?o:o=e(n=i,r=s)}}function Gr(t){return function(){this.style.removeProperty(t)}}function ma(t,e,n){var r,o=n+"",i;return function(){var s=ne(this,t);return s===o?null:s===r?i:i=e(r=s,n)}}function ya(t,e,n){var r,o,i;return function(){var s=ne(this,t),c=n(this),a=c+"";return c==null&&(a=c=(this.style.removeProperty(t),ne(this,t))),s===a?null:s===r&&a===o?i:(o=a,i=e(r=s,c))}}function wa(t,e){var n,r,o,i="style."+e,s="end."+i,c;return function(){var a=vt(this,t),l=a.on,u=a.value[i]==null?c||(c=Gr(e)):void 0;(l!==n||o!==u)&&(r=(n=l).copy()).on(s,o=u),a.on=r}}function xa(t,e,n){var r=(t+="")=="transform"?Si:Wr;return e==null?this.styleTween(t,ga(t,r)).on("end.style."+t,Gr(t)):typeof e=="function"?this.styleTween(t,ya(t,r,Nn(this,"style."+t,e))).each(wa(this._id,t)):this.styleTween(t,ma(t,r,e),n).on("end.style."+t,null)}function va(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function _a(t,e,n){var r,o;function i(){var s=e.apply(this,arguments);return s!==o&&(r=(o=s)&&va(t,s,n)),r}return i._value=e,i}function Ea(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,_a(t,e,n??""))}function Sa(t){return function(){this.textContent=t}}function ba(t){return function(){var e=t(this);this.textContent=e??""}}function Na(t){return this.tween("text",typeof t=="function"?ba(Nn(this,"text",t)):Sa(t==null?"":t+""))}function Aa(t){return function(e){this.textContent=t.call(this,e)}}function Ca(t){var e,n;function r(){var o=t.apply(this,arguments);return o!==n&&(e=(n=o)&&Aa(o)),e}return r._value=t,r}function Ta(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Ca(t))}function Ma(){for(var t=this._name,e=this._id,n=Zr(),r=this._groups,o=r.length,i=0;i<o;++i)for(var s=r[i],c=s.length,a,l=0;l<c;++l)if(a=s[l]){var u=mt(a,e);Ue(a,t,n,l,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Nt(r,this._parents,t,n)}function $a(){var t,e,n=this,r=n._id,o=n.size();return new Promise(function(i,s){var c={value:s},a={value:function(){--o===0&&i()}};n.each(function(){var l=vt(this,r),u=l.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(c),e._.interrupt.push(c),e._.end.push(a)),l.on=e}),o===0&&i()})}var za=0;function Nt(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Zr(){return++za}var St=_e.prototype;Nt.prototype={constructor:Nt,select:fa,selectAll:da,selectChild:St.selectChild,selectChildren:St.selectChildren,filter:oa,merge:ia,selection:pa,transition:Ma,call:St.call,nodes:St.nodes,node:St.node,size:St.size,empty:St.empty,each:St.each,on:aa,attr:Oc,attrTween:Gc,style:xa,styleTween:Ea,text:Na,textTween:Ta,remove:la,tween:Rc,delay:qc,duration:jc,ease:ea,easeVarying:ra,end:$a,[Symbol.iterator]:St[Symbol.iterator]};function Ia(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var ka={time:null,delay:0,duration:250,ease:Ia};function Da(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Ra(t){var e,n;t instanceof Nt?(e=t._id,t=t._name):(e=Zr(),(n=ka).time=Sn(),t=t==null?null:t+"");for(var r=this._groups,o=r.length,i=0;i<o;++i)for(var s=r[i],c=s.length,a,l=0;l<c;++l)(a=s[l])&&Ue(a,t,e,l,s,n||Da(a,e));return new Nt(r,this._parents,t,e)}_e.prototype.interrupt=Ic;_e.prototype.transition=Ra;const be=t=>()=>t;function Pa(t,{sourceEvent:e,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function bt(t,e,n){this.k=t,this.x=e,this.y=n}bt.prototype={constructor:bt,scale:function(t){return t===1?this:new bt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new bt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var $t=new bt(1,0,0);bt.prototype;function en(t){t.stopImmediatePropagation()}function le(t){t.preventDefault(),t.stopImmediatePropagation()}function Ha(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Va(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function nr(){return this.__zoom||$t}function Ba(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function La(){return navigator.maxTouchPoints||"ontouchstart"in this}function Fa(t,e,n){var r=t.invertX(e[0][0])-n[0][0],o=t.invertX(e[1][0])-n[1][0],i=t.invertY(e[0][1])-n[0][1],s=t.invertY(e[1][1])-n[1][1];return t.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s))}function Oa(){var t=Ha,e=Va,n=Fa,r=Ba,o=La,i=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],c=250,a=bi,l=Fe("start","zoom","end"),u,f,h,p=500,v=150,m=0,_=10;function g(d){d.property("__zoom",nr).on("wheel.zoom",H,{passive:!1}).on("mousedown.zoom",z).on("dblclick.zoom",B).filter(o).on("touchstart.zoom",P).on("touchmove.zoom",L).on("touchend.zoom touchcancel.zoom",V).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(d,S,x,T){var I=d.selection?d.selection():d;I.property("__zoom",nr),d!==I?M(d,S,x,T):I.interrupt().each(function(){$(this,arguments).event(T).start().zoom(null,typeof S=="function"?S.apply(this,arguments):S).end()})},g.scaleBy=function(d,S,x,T){g.scaleTo(d,function(){var I=this.__zoom.k,w=typeof S=="function"?S.apply(this,arguments):S;return I*w},x,T)},g.scaleTo=function(d,S,x,T){g.transform(d,function(){var I=e.apply(this,arguments),w=this.__zoom,C=x==null?y(I):typeof x=="function"?x.apply(this,arguments):x,k=w.invert(C),D=typeof S=="function"?S.apply(this,arguments):S;return n(A(E(w,D),C,k),I,s)},x,T)},g.translateBy=function(d,S,x,T){g.transform(d,function(){return n(this.__zoom.translate(typeof S=="function"?S.apply(this,arguments):S,typeof x=="function"?x.apply(this,arguments):x),e.apply(this,arguments),s)},null,T)},g.translateTo=function(d,S,x,T,I){g.transform(d,function(){var w=e.apply(this,arguments),C=this.__zoom,k=T==null?y(w):typeof T=="function"?T.apply(this,arguments):T;return n($t.translate(k[0],k[1]).scale(C.k).translate(typeof S=="function"?-S.apply(this,arguments):-S,typeof x=="function"?-x.apply(this,arguments):-x),w,s)},T,I)};function E(d,S){return S=Math.max(i[0],Math.min(i[1],S)),S===d.k?d:new bt(S,d.x,d.y)}function A(d,S,x){var T=S[0]-x[0]*d.k,I=S[1]-x[1]*d.k;return T===d.x&&I===d.y?d:new bt(d.k,T,I)}function y(d){return[(+d[0][0]+ +d[1][0])/2,(+d[0][1]+ +d[1][1])/2]}function M(d,S,x,T){d.on("start.zoom",function(){$(this,arguments).event(T).start()}).on("interrupt.zoom end.zoom",function(){$(this,arguments).event(T).end()}).tween("zoom",function(){var I=this,w=arguments,C=$(I,w).event(T),k=e.apply(I,w),D=x==null?y(k):typeof x=="function"?x.apply(I,w):x,O=Math.max(k[1][0]-k[0][0],k[1][1]-k[0][1]),F=I.__zoom,X=typeof S=="function"?S.apply(I,w):S,G=a(F.invert(D).concat(O/F.k),X.invert(D).concat(O/X.k));return function(Z){if(Z===1)Z=X;else{var K=G(Z),j=O/K[2];Z=new bt(j,D[0]-K[0]*j,D[1]-K[1]*j)}C.zoom(null,Z)}})}function $(d,S,x){return!x&&d.__zooming||new R(d,S)}function R(d,S){this.that=d,this.args=S,this.active=0,this.sourceEvent=null,this.extent=e.apply(d,S),this.taps=0}R.prototype={event:function(d){return d&&(this.sourceEvent=d),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(d,S){return this.mouse&&d!=="mouse"&&(this.mouse[1]=S.invert(this.mouse[0])),this.touch0&&d!=="touch"&&(this.touch0[1]=S.invert(this.touch0[0])),this.touch1&&d!=="touch"&&(this.touch1[1]=S.invert(this.touch1[0])),this.that.__zoom=S,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(d){var S=pt(this.that).datum();l.call(d,this.that,new Pa(d,{sourceEvent:this.sourceEvent,target:g,transform:this.that.__zoom,dispatch:l}),S)}};function H(d,...S){if(!t.apply(this,arguments))return;var x=$(this,S).event(d),T=this.__zoom,I=Math.max(i[0],Math.min(i[1],T.k*Math.pow(2,r.apply(this,arguments)))),w=xt(d);if(x.wheel)(x.mouse[0][0]!==w[0]||x.mouse[0][1]!==w[1])&&(x.mouse[1]=T.invert(x.mouse[0]=w)),clearTimeout(x.wheel);else{if(T.k===I)return;x.mouse=[w,T.invert(w)],Ie(this),x.start()}le(d),x.wheel=setTimeout(C,v),x.zoom("mouse",n(A(E(T,I),x.mouse[0],x.mouse[1]),x.extent,s));function C(){x.wheel=null,x.end()}}function z(d,...S){if(h||!t.apply(this,arguments))return;var x=d.currentTarget,T=$(this,S,!0).event(d),I=pt(d.view).on("mousemove.zoom",D,!0).on("mouseup.zoom",O,!0),w=xt(d,x),C=d.clientX,k=d.clientY;Lr(d.view),en(d),T.mouse=[w,this.__zoom.invert(w)],Ie(this),T.start();function D(F){if(le(F),!T.moved){var X=F.clientX-C,G=F.clientY-k;T.moved=X*X+G*G>m}T.event(F).zoom("mouse",n(A(T.that.__zoom,T.mouse[0]=xt(F,x),T.mouse[1]),T.extent,s))}function O(F){I.on("mousemove.zoom mouseup.zoom",null),Fr(F.view,T.moved),le(F),T.event(F).end()}}function B(d,...S){if(t.apply(this,arguments)){var x=this.__zoom,T=xt(d.changedTouches?d.changedTouches[0]:d,this),I=x.invert(T),w=x.k*(d.shiftKey?.5:2),C=n(A(E(x,w),T,I),e.apply(this,S),s);le(d),c>0?pt(this).transition().duration(c).call(M,C,T,d):pt(this).call(g.transform,C,T,d)}}function P(d,...S){if(t.apply(this,arguments)){var x=d.touches,T=x.length,I=$(this,S,d.changedTouches.length===T).event(d),w,C,k,D;for(en(d),C=0;C<T;++C)k=x[C],D=xt(k,this),D=[D,this.__zoom.invert(D),k.identifier],I.touch0?!I.touch1&&I.touch0[2]!==D[2]&&(I.touch1=D,I.taps=0):(I.touch0=D,w=!0,I.taps=1+!!u);u&&(u=clearTimeout(u)),w&&(I.taps<2&&(f=D[0],u=setTimeout(function(){u=null},p)),Ie(this),I.start())}}function L(d,...S){if(this.__zooming){var x=$(this,S).event(d),T=d.changedTouches,I=T.length,w,C,k,D;for(le(d),w=0;w<I;++w)C=T[w],k=xt(C,this),x.touch0&&x.touch0[2]===C.identifier?x.touch0[0]=k:x.touch1&&x.touch1[2]===C.identifier&&(x.touch1[0]=k);if(C=x.that.__zoom,x.touch1){var O=x.touch0[0],F=x.touch0[1],X=x.touch1[0],G=x.touch1[1],Z=(Z=X[0]-O[0])*Z+(Z=X[1]-O[1])*Z,K=(K=G[0]-F[0])*K+(K=G[1]-F[1])*K;C=E(C,Math.sqrt(Z/K)),k=[(O[0]+X[0])/2,(O[1]+X[1])/2],D=[(F[0]+G[0])/2,(F[1]+G[1])/2]}else if(x.touch0)k=x.touch0[0],D=x.touch0[1];else return;x.zoom("touch",n(A(C,k,D),x.extent,s))}}function V(d,...S){if(this.__zooming){var x=$(this,S).event(d),T=d.changedTouches,I=T.length,w,C;for(en(d),h&&clearTimeout(h),h=setTimeout(function(){h=null},p),w=0;w<I;++w)C=T[w],x.touch0&&x.touch0[2]===C.identifier?delete x.touch0:x.touch1&&x.touch1[2]===C.identifier&&delete x.touch1;if(x.touch1&&!x.touch0&&(x.touch0=x.touch1,delete x.touch1),x.touch0)x.touch0[1]=this.__zoom.invert(x.touch0[0]);else if(x.end(),x.taps===2&&(C=xt(C,this),Math.hypot(f[0]-C[0],f[1]-C[1])<_)){var k=pt(this).on("dblclick.zoom");k&&k.apply(this,arguments)}}}return g.wheelDelta=function(d){return arguments.length?(r=typeof d=="function"?d:be(+d),g):r},g.filter=function(d){return arguments.length?(t=typeof d=="function"?d:be(!!d),g):t},g.touchable=function(d){return arguments.length?(o=typeof d=="function"?d:be(!!d),g):o},g.extent=function(d){return arguments.length?(e=typeof d=="function"?d:be([[+d[0][0],+d[0][1]],[+d[1][0],+d[1][1]]]),g):e},g.scaleExtent=function(d){return arguments.length?(i[0]=+d[0],i[1]=+d[1],g):[i[0],i[1]]},g.translateExtent=function(d){return arguments.length?(s[0][0]=+d[0][0],s[1][0]=+d[1][0],s[0][1]=+d[0][1],s[1][1]=+d[1][1],g):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},g.constrain=function(d){return arguments.length?(n=d,g):n},g.duration=function(d){return arguments.length?(c=+d,g):c},g.interpolate=function(d){return arguments.length?(a=d,g):a},g.on=function(){var d=l.on.apply(l,arguments);return d===l?g:d},g.clickDistance=function(d){return arguments.length?(m=(d=+d)*d,g):Math.sqrt(m)},g.tapDistance=function(d){return arguments.length?(_=+d,g):_},g}const Xe=b.createContext(null),Ya=Xe.Provider,At={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Kr=At.error001();function J(t,e){const n=b.useContext(Xe);if(n===null)throw new Error(Kr);return Cr(n,t,e)}const nt=()=>{const t=b.useContext(Xe);if(t===null)throw new Error(Kr);return b.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},Ua=t=>t.userSelectionActive?"none":"all";function qr({position:t,children:e,className:n,style:r,...o}){const i=J(Ua),s=`${t}`.split("-");return N.createElement("div",{className:it(["react-flow__panel",n,...s]),style:{...r,pointerEvents:i},...o},e)}function Xa({proOptions:t,position:e="bottom-right"}){return t!=null&&t.hideAttribution?null:N.createElement(qr,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},N.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const Wa=({x:t,y:e,label:n,labelStyle:r={},labelShowBg:o=!0,labelBgStyle:i={},labelBgPadding:s=[2,4],labelBgBorderRadius:c=2,children:a,className:l,...u})=>{const f=b.useRef(null),[h,p]=b.useState({x:0,y:0,width:0,height:0}),v=it(["react-flow__edge-textwrapper",l]);return b.useEffect(()=>{if(f.current){const m=f.current.getBBox();p({x:m.x,y:m.y,width:m.width,height:m.height})}},[n]),typeof n>"u"||!n?null:N.createElement("g",{transform:`translate(${t-h.width/2} ${e-h.height/2})`,className:v,visibility:h.width?"visible":"hidden",...u},o&&N.createElement("rect",{width:h.width+2*s[0],x:-s[0],y:-s[1],height:h.height+2*s[1],className:"react-flow__edge-textbg",style:i,rx:c,ry:c}),N.createElement("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:f,style:r},n),a)};var Ga=b.memo(Wa);const An=t=>({width:t.offsetWidth,height:t.offsetHeight}),oe=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),Cn=(t={x:0,y:0},e)=>({x:oe(t.x,e[0][0],e[1][0]),y:oe(t.y,e[0][1],e[1][1])}),rr=(t,e,n)=>t<e?oe(Math.abs(t-e),1,50)/50:t>n?-oe(Math.abs(t-n),1,50)/50:0,Qr=(t,e)=>{const n=rr(t.x,35,e.width-35)*20,r=rr(t.y,35,e.height-35)*20;return[n,r]},Jr=t=>{var e;return((e=t.getRootNode)==null?void 0:e.call(t))||(window==null?void 0:window.document)},Za=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),Tn=({x:t,y:e,width:n,height:r})=>({x:t,y:e,x2:t+n,y2:e+r}),Ka=({x:t,y:e,x2:n,y2:r})=>({x:t,y:e,width:n-t,height:r-e}),or=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),hn=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),r=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*r)},qa=t=>lt(t.width)&&lt(t.height)&&lt(t.x)&&lt(t.y),lt=t=>!isNaN(t)&&isFinite(t),tt=Symbol.for("internals"),jr=["Enter"," ","Escape"],Qa=(t,e)=>{},Ja=t=>"nativeEvent"in t;function pn(t){var o,i;const e=Ja(t)?t.nativeEvent:t,n=((i=(o=e.composedPath)==null?void 0:o.call(e))==null?void 0:i[0])||t.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const to=t=>"clientX"in t,zt=(t,e)=>{var i,s;const n=to(t),r=n?t.clientX:(i=t.touches)==null?void 0:i[0].clientX,o=n?t.clientY:(s=t.touches)==null?void 0:s[0].clientY;return{x:r-((e==null?void 0:e.left)??0),y:o-((e==null?void 0:e.top)??0)}},He=()=>{var t;return typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0},Ee=({id:t,path:e,labelX:n,labelY:r,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:c,labelBgPadding:a,labelBgBorderRadius:l,style:u,markerEnd:f,markerStart:h,interactionWidth:p=20})=>N.createElement(N.Fragment,null,N.createElement("path",{id:t,style:u,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:f,markerStart:h}),p&&N.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:p,className:"react-flow__edge-interaction"}),o&&lt(n)&&lt(r)?N.createElement(Ga,{x:n,y:r,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:c,labelBgPadding:a,labelBgBorderRadius:l}):null);Ee.displayName="BaseEdge";function fe(t,e,n){return n===void 0?n:r=>{const o=e().edges.find(i=>i.id===t);o&&n(r,{...o})}}function eo({sourceX:t,sourceY:e,targetX:n,targetY:r}){const o=Math.abs(n-t)/2,i=n<t?n+o:n-o,s=Math.abs(r-e)/2,c=r<e?r+s:r-s;return[i,c,o,s]}function no({sourceX:t,sourceY:e,targetX:n,targetY:r,sourceControlX:o,sourceControlY:i,targetControlX:s,targetControlY:c}){const a=t*.125+o*.375+s*.375+n*.125,l=e*.125+i*.375+c*.375+r*.125,u=Math.abs(a-t),f=Math.abs(l-e);return[a,l,u,f]}var Ot;(function(t){t.Strict="strict",t.Loose="loose"})(Ot||(Ot={}));var Lt;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Lt||(Lt={}));var xe;(function(t){t.Partial="partial",t.Full="full"})(xe||(xe={}));var Mt;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Mt||(Mt={}));var Ve;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Ve||(Ve={}));var Y;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(Y||(Y={}));function ir({pos:t,x1:e,y1:n,x2:r,y2:o}){return t===Y.Left||t===Y.Right?[.5*(e+r),n]:[e,.5*(n+o)]}function ro({sourceX:t,sourceY:e,sourcePosition:n=Y.Bottom,targetX:r,targetY:o,targetPosition:i=Y.Top}){const[s,c]=ir({pos:n,x1:t,y1:e,x2:r,y2:o}),[a,l]=ir({pos:i,x1:r,y1:o,x2:t,y2:e}),[u,f,h,p]=no({sourceX:t,sourceY:e,targetX:r,targetY:o,sourceControlX:s,sourceControlY:c,targetControlX:a,targetControlY:l});return[`M${t},${e} C${s},${c} ${a},${l} ${r},${o}`,u,f,h,p]}const Mn=b.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:o=Y.Bottom,targetPosition:i=Y.Top,label:s,labelStyle:c,labelShowBg:a,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:v,interactionWidth:m})=>{const[_,g,E]=ro({sourceX:t,sourceY:e,sourcePosition:o,targetX:n,targetY:r,targetPosition:i});return N.createElement(Ee,{path:_,labelX:g,labelY:E,label:s,labelStyle:c,labelShowBg:a,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:v,interactionWidth:m})});Mn.displayName="SimpleBezierEdge";const sr={[Y.Left]:{x:-1,y:0},[Y.Right]:{x:1,y:0},[Y.Top]:{x:0,y:-1},[Y.Bottom]:{x:0,y:1}},ja=({source:t,sourcePosition:e=Y.Bottom,target:n})=>e===Y.Left||e===Y.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},cr=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function tu({source:t,sourcePosition:e=Y.Bottom,target:n,targetPosition:r=Y.Top,center:o,offset:i}){const s=sr[e],c=sr[r],a={x:t.x+s.x*i,y:t.y+s.y*i},l={x:n.x+c.x*i,y:n.y+c.y*i},u=ja({source:a,sourcePosition:e,target:l}),f=u.x!==0?"x":"y",h=u[f];let p=[],v,m;const _={x:0,y:0},g={x:0,y:0},[E,A,y,M]=eo({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(s[f]*c[f]===-1){v=o.x??E,m=o.y??A;const R=[{x:v,y:a.y},{x:v,y:l.y}],H=[{x:a.x,y:m},{x:l.x,y:m}];s[f]===h?p=f==="x"?R:H:p=f==="x"?H:R}else{const R=[{x:a.x,y:l.y}],H=[{x:l.x,y:a.y}];if(f==="x"?p=s.x===h?H:R:p=s.y===h?R:H,e===r){const V=Math.abs(t[f]-n[f]);if(V<=i){const d=Math.min(i-1,i-V);s[f]===h?_[f]=(a[f]>t[f]?-1:1)*d:g[f]=(l[f]>n[f]?-1:1)*d}}if(e!==r){const V=f==="x"?"y":"x",d=s[f]===c[V],S=a[V]>l[V],x=a[V]<l[V];(s[f]===1&&(!d&&S||d&&x)||s[f]!==1&&(!d&&x||d&&S))&&(p=f==="x"?R:H)}const z={x:a.x+_.x,y:a.y+_.y},B={x:l.x+g.x,y:l.y+g.y},P=Math.max(Math.abs(z.x-p[0].x),Math.abs(B.x-p[0].x)),L=Math.max(Math.abs(z.y-p[0].y),Math.abs(B.y-p[0].y));P>=L?(v=(z.x+B.x)/2,m=p[0].y):(v=p[0].x,m=(z.y+B.y)/2)}return[[t,{x:a.x+_.x,y:a.y+_.y},...p,{x:l.x+g.x,y:l.y+g.y},n],v,m,y,M]}function eu(t,e,n,r){const o=Math.min(cr(t,e)/2,cr(e,n)/2,r),{x:i,y:s}=e;if(t.x===i&&i===n.x||t.y===s&&s===n.y)return`L${i} ${s}`;if(t.y===s){const l=t.x<n.x?-1:1,u=t.y<n.y?1:-1;return`L ${i+o*l},${s}Q ${i},${s} ${i},${s+o*u}`}const c=t.x<n.x?1:-1,a=t.y<n.y?-1:1;return`L ${i},${s+o*a}Q ${i},${s} ${i+o*c},${s}`}function gn({sourceX:t,sourceY:e,sourcePosition:n=Y.Bottom,targetX:r,targetY:o,targetPosition:i=Y.Top,borderRadius:s=5,centerX:c,centerY:a,offset:l=20}){const[u,f,h,p,v]=tu({source:{x:t,y:e},sourcePosition:n,target:{x:r,y:o},targetPosition:i,center:{x:c,y:a},offset:l});return[u.reduce((_,g,E)=>{let A="";return E>0&&E<u.length-1?A=eu(u[E-1],g,u[E+1],s):A=`${E===0?"M":"L"}${g.x} ${g.y}`,_+=A,_},""),f,h,p,v]}const We=b.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:c,labelBgPadding:a,labelBgBorderRadius:l,style:u,sourcePosition:f=Y.Bottom,targetPosition:h=Y.Top,markerEnd:p,markerStart:v,pathOptions:m,interactionWidth:_})=>{const[g,E,A]=gn({sourceX:t,sourceY:e,sourcePosition:f,targetX:n,targetY:r,targetPosition:h,borderRadius:m==null?void 0:m.borderRadius,offset:m==null?void 0:m.offset});return N.createElement(Ee,{path:g,labelX:E,labelY:A,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:c,labelBgPadding:a,labelBgBorderRadius:l,style:u,markerEnd:p,markerStart:v,interactionWidth:_})});We.displayName="SmoothStepEdge";const $n=b.memo(t=>{var e;return N.createElement(We,{...t,pathOptions:b.useMemo(()=>{var n;return{borderRadius:0,offset:(n=t.pathOptions)==null?void 0:n.offset}},[(e=t.pathOptions)==null?void 0:e.offset])})});$n.displayName="StepEdge";function nu({sourceX:t,sourceY:e,targetX:n,targetY:r}){const[o,i,s,c]=eo({sourceX:t,sourceY:e,targetX:n,targetY:r});return[`M ${t},${e}L ${n},${r}`,o,i,s,c]}const zn=b.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:c,labelBgPadding:a,labelBgBorderRadius:l,style:u,markerEnd:f,markerStart:h,interactionWidth:p})=>{const[v,m,_]=nu({sourceX:t,sourceY:e,targetX:n,targetY:r});return N.createElement(Ee,{path:v,labelX:m,labelY:_,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:c,labelBgPadding:a,labelBgBorderRadius:l,style:u,markerEnd:f,markerStart:h,interactionWidth:p})});zn.displayName="StraightEdge";function Ne(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function ar({pos:t,x1:e,y1:n,x2:r,y2:o,c:i}){switch(t){case Y.Left:return[e-Ne(e-r,i),n];case Y.Right:return[e+Ne(r-e,i),n];case Y.Top:return[e,n-Ne(n-o,i)];case Y.Bottom:return[e,n+Ne(o-n,i)]}}function oo({sourceX:t,sourceY:e,sourcePosition:n=Y.Bottom,targetX:r,targetY:o,targetPosition:i=Y.Top,curvature:s=.25}){const[c,a]=ar({pos:n,x1:t,y1:e,x2:r,y2:o,c:s}),[l,u]=ar({pos:i,x1:r,y1:o,x2:t,y2:e,c:s}),[f,h,p,v]=no({sourceX:t,sourceY:e,targetX:r,targetY:o,sourceControlX:c,sourceControlY:a,targetControlX:l,targetControlY:u});return[`M${t},${e} C${c},${a} ${l},${u} ${r},${o}`,f,h,p,v]}const Be=b.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:o=Y.Bottom,targetPosition:i=Y.Top,label:s,labelStyle:c,labelShowBg:a,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:v,pathOptions:m,interactionWidth:_})=>{const[g,E,A]=oo({sourceX:t,sourceY:e,sourcePosition:o,targetX:n,targetY:r,targetPosition:i,curvature:m==null?void 0:m.curvature});return N.createElement(Ee,{path:g,labelX:E,labelY:A,label:s,labelStyle:c,labelShowBg:a,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:v,interactionWidth:_})});Be.displayName="BezierEdge";const In=b.createContext(null),ru=In.Provider;In.Consumer;const ou=()=>b.useContext(In),iu=t=>"id"in t&&"source"in t&&"target"in t,su=({source:t,sourceHandle:e,target:n,targetHandle:r})=>`reactflow__edge-${t}${e||""}-${n}${r||""}`,mn=(t,e)=>typeof t>"u"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(r=>`${r}=${t[r]}`).join("&")}`,cu=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),au=(t,e)=>{if(!t.source||!t.target)return e;let n;return iu(t)?n={...t}:n={...t,id:su(t)},cu(n,e)?e:e.concat(n)},yn=({x:t,y:e},[n,r,o],i,[s,c])=>{const a={x:(t-n)/o,y:(e-r)/o};return i?{x:s*Math.round(a.x/s),y:c*Math.round(a.y/c)}:a},io=({x:t,y:e},[n,r,o])=>({x:t*o+n,y:e*o+r}),te=(t,e=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(t.width??0)*e[0],r=(t.height??0)*e[1],o={x:t.position.x-n,y:t.position.y-r};return{...o,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-n,y:t.positionAbsolute.y-r}:o}},kn=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((r,o)=>{const{x:i,y:s}=te(o,e).positionAbsolute;return Za(r,Tn({x:i,y:s,width:o.width||0,height:o.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Ka(n)},so=(t,e,[n,r,o]=[0,0,1],i=!1,s=!1,c=[0,0])=>{const a={x:(e.x-n)/o,y:(e.y-r)/o,width:e.width/o,height:e.height/o},l=[];return t.forEach(u=>{const{width:f,height:h,selectable:p=!0,hidden:v=!1}=u;if(s&&!p||v)return!1;const{positionAbsolute:m}=te(u,c),_={x:m.x,y:m.y,width:f||0,height:h||0},g=hn(a,_),E=typeof f>"u"||typeof h>"u"||f===null||h===null,A=i&&g>0,y=(f||0)*(h||0);(E||A||g>=y||u.dragging)&&l.push(u)}),l},co=(t,e)=>{const n=t.map(r=>r.id);return e.filter(r=>n.includes(r.source)||n.includes(r.target))},ao=(t,e,n,r,o,i=.1)=>{const s=e/(t.width*(1+i)),c=n/(t.height*(1+i)),a=Math.min(s,c),l=oe(a,r,o),u=t.x+t.width/2,f=t.y+t.height/2,h=e/2-u*l,p=n/2-f*l;return{x:h,y:p,zoom:l}},Bt=(t,e=0)=>t.transition().duration(e);function ur(t,e,n,r){return(e[n]||[]).reduce((o,i)=>{var s,c;return`${t.id}-${i.id}-${n}`!==r&&o.push({id:i.id||null,type:n,nodeId:t.id,x:(((s=t.positionAbsolute)==null?void 0:s.x)??0)+i.x+i.width/2,y:(((c=t.positionAbsolute)==null?void 0:c.y)??0)+i.y+i.height/2}),o},[])}function uu(t,e,n,r,o,i){const{x:s,y:c}=zt(t),l=e.elementsFromPoint(s,c).find(v=>v.classList.contains("react-flow__handle"));if(l){const v=l.getAttribute("data-nodeid");if(v){const m=Dn(void 0,l),_=l.getAttribute("data-handleid"),g=i({nodeId:v,id:_,type:m});if(g){const E=o.find(A=>A.nodeId===v&&A.type===m&&A.id===_);return{handle:{id:_,type:m,nodeId:v,x:(E==null?void 0:E.x)||n.x,y:(E==null?void 0:E.y)||n.y},validHandleResult:g}}}}let u=[],f=1/0;if(o.forEach(v=>{const m=Math.sqrt((v.x-n.x)**2+(v.y-n.y)**2);if(m<=r){const _=i(v);m<=f&&(m<f?u=[{handle:v,validHandleResult:_}]:m===f&&u.push({handle:v,validHandleResult:_}),f=m)}}),!u.length)return{handle:null,validHandleResult:uo()};if(u.length===1)return u[0];const h=u.some(({validHandleResult:v})=>v.isValid),p=u.some(({handle:v})=>v.type==="target");return u.find(({handle:v,validHandleResult:m})=>p?v.type==="target":h?m.isValid:!0)||u[0]}const lu={source:null,target:null,sourceHandle:null,targetHandle:null},uo=()=>({handleDomNode:null,isValid:!1,connection:lu,endHandle:null});function lo(t,e,n,r,o,i,s){const c=o==="target",a=s.querySelector(`.react-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),l={...uo(),handleDomNode:a};if(a){const u=Dn(void 0,a),f=a.getAttribute("data-nodeid"),h=a.getAttribute("data-handleid"),p=a.classList.contains("connectable"),v=a.classList.contains("connectableend"),m={source:c?f:n,sourceHandle:c?h:r,target:c?n:f,targetHandle:c?r:h};l.connection=m,p&&v&&(e===Ot.Strict?c&&u==="source"||!c&&u==="target":f!==n||h!==r)&&(l.endHandle={nodeId:f,handleId:h,type:u},l.isValid=i(m))}return l}function fu({nodes:t,nodeId:e,handleId:n,handleType:r}){return t.reduce((o,i)=>{if(i[tt]){const{handleBounds:s}=i[tt];let c=[],a=[];s&&(c=ur(i,s,"source",`${e}-${n}-${r}`),a=ur(i,s,"target",`${e}-${n}-${r}`)),o.push(...c,...a)}return o},[])}function Dn(t,e){return t||(e!=null&&e.classList.contains("target")?"target":e!=null&&e.classList.contains("source")?"source":null)}function nn(t){t==null||t.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function du(t,e){let n=null;return e?n="valid":t&&!e&&(n="invalid"),n}function fo({event:t,handleId:e,nodeId:n,onConnect:r,isTarget:o,getState:i,setState:s,isValidConnection:c,edgeUpdaterType:a,onReconnectEnd:l}){const u=Jr(t.target),{connectionMode:f,domNode:h,autoPanOnConnect:p,connectionRadius:v,onConnectStart:m,panBy:_,getNodes:g,cancelConnection:E}=i();let A=0,y;const{x:M,y:$}=zt(t),R=u==null?void 0:u.elementFromPoint(M,$),H=Dn(a,R),z=h==null?void 0:h.getBoundingClientRect();if(!z||!H)return;let B,P=zt(t,z),L=!1,V=null,d=!1,S=null;const x=fu({nodes:g(),nodeId:n,handleId:e,handleType:H}),T=()=>{if(!p)return;const[C,k]=Qr(P,z);_({x:C,y:k}),A=requestAnimationFrame(T)};s({connectionPosition:P,connectionStatus:null,connectionNodeId:n,connectionHandleId:e,connectionHandleType:H,connectionStartHandle:{nodeId:n,handleId:e,type:H},connectionEndHandle:null}),m==null||m(t,{nodeId:n,handleId:e,handleType:H});function I(C){const{transform:k}=i();P=zt(C,z);const{handle:D,validHandleResult:O}=uu(C,u,yn(P,k,!1,[1,1]),v,x,F=>lo(F,f,n,e,o?"target":"source",c,u));if(y=D,L||(T(),L=!0),S=O.handleDomNode,V=O.connection,d=O.isValid,s({connectionPosition:y&&d?io({x:y.x,y:y.y},k):P,connectionStatus:du(!!y,d),connectionEndHandle:O.endHandle}),!y&&!d&&!S)return nn(B);V.source!==V.target&&S&&(nn(B),B=S,S.classList.add("connecting","react-flow__handle-connecting"),S.classList.toggle("valid",d),S.classList.toggle("react-flow__handle-valid",d))}function w(C){var k,D;(y||S)&&V&&d&&(r==null||r(V)),(D=(k=i()).onConnectEnd)==null||D.call(k,C),a&&(l==null||l(C)),nn(B),E(),cancelAnimationFrame(A),L=!1,d=!1,V=null,S=null,u.removeEventListener("mousemove",I),u.removeEventListener("mouseup",w),u.removeEventListener("touchmove",I),u.removeEventListener("touchend",w)}u.addEventListener("mousemove",I),u.addEventListener("mouseup",w),u.addEventListener("touchmove",I),u.addEventListener("touchend",w)}const lr=()=>!0,hu=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),pu=(t,e,n)=>r=>{const{connectionStartHandle:o,connectionEndHandle:i,connectionClickStartHandle:s}=r;return{connecting:(o==null?void 0:o.nodeId)===t&&(o==null?void 0:o.handleId)===e&&(o==null?void 0:o.type)===n||(i==null?void 0:i.nodeId)===t&&(i==null?void 0:i.handleId)===e&&(i==null?void 0:i.type)===n,clickConnecting:(s==null?void 0:s.nodeId)===t&&(s==null?void 0:s.handleId)===e&&(s==null?void 0:s.type)===n}},ho=b.forwardRef(({type:t="source",position:e=Y.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:o=!0,isConnectableEnd:i=!0,id:s,onConnect:c,children:a,className:l,onMouseDown:u,onTouchStart:f,...h},p)=>{var z,B;const v=s||null,m=t==="target",_=nt(),g=ou(),{connectOnClick:E,noPanClassName:A}=J(hu,ot),{connecting:y,clickConnecting:M}=J(pu(g,v,t),ot);g||(B=(z=_.getState()).onError)==null||B.call(z,"010",At.error010());const $=P=>{const{defaultEdgeOptions:L,onConnect:V,hasDefaultEdges:d}=_.getState(),S={...L,...P};if(d){const{edges:x,setEdges:T}=_.getState();T(au(S,x))}V==null||V(S),c==null||c(S)},R=P=>{if(!g)return;const L=to(P);o&&(L&&P.button===0||!L)&&fo({event:P,handleId:v,nodeId:g,onConnect:$,isTarget:m,getState:_.getState,setState:_.setState,isValidConnection:n||_.getState().isValidConnection||lr}),L?u==null||u(P):f==null||f(P)},H=P=>{const{onClickConnectStart:L,onClickConnectEnd:V,connectionClickStartHandle:d,connectionMode:S,isValidConnection:x}=_.getState();if(!g||!d&&!o)return;if(!d){L==null||L(P,{nodeId:g,handleId:v,handleType:t}),_.setState({connectionClickStartHandle:{nodeId:g,type:t,handleId:v}});return}const T=Jr(P.target),I=n||x||lr,{connection:w,isValid:C}=lo({nodeId:g,id:v,type:t},S,d.nodeId,d.handleId||null,d.type,I,T);C&&$(w),V==null||V(P),_.setState({connectionClickStartHandle:null})};return N.createElement("div",{"data-handleid":v,"data-nodeid":g,"data-handlepos":e,"data-id":`${g}-${v}-${t}`,className:it(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",A,l,{source:!m,target:m,connectable:r,connectablestart:o,connectableend:i,connecting:M,connectionindicator:r&&(o&&!y||i&&y)}]),onMouseDown:R,onTouchStart:R,onClick:E?H:void 0,ref:p,...h},a)});ho.displayName="Handle";var Le=b.memo(ho);const po=({data:t,isConnectable:e,targetPosition:n=Y.Top,sourcePosition:r=Y.Bottom})=>N.createElement(N.Fragment,null,N.createElement(Le,{type:"target",position:n,isConnectable:e}),t==null?void 0:t.label,N.createElement(Le,{type:"source",position:r,isConnectable:e}));po.displayName="DefaultNode";var wn=b.memo(po);const go=({data:t,isConnectable:e,sourcePosition:n=Y.Bottom})=>N.createElement(N.Fragment,null,t==null?void 0:t.label,N.createElement(Le,{type:"source",position:n,isConnectable:e}));go.displayName="InputNode";var mo=b.memo(go);const yo=({data:t,isConnectable:e,targetPosition:n=Y.Top})=>N.createElement(N.Fragment,null,N.createElement(Le,{type:"target",position:n,isConnectable:e}),t==null?void 0:t.label);yo.displayName="OutputNode";var wo=b.memo(yo);const Rn=()=>null;Rn.displayName="GroupNode";const gu=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected).map(e=>({...e}))}),Ae=t=>t.id;function mu(t,e){return ot(t.selectedNodes.map(Ae),e.selectedNodes.map(Ae))&&ot(t.selectedEdges.map(Ae),e.selectedEdges.map(Ae))}const xo=b.memo(({onSelectionChange:t})=>{const e=nt(),{selectedNodes:n,selectedEdges:r}=J(gu,mu);return b.useEffect(()=>{const o={nodes:n,edges:r};t==null||t(o),e.getState().onSelectionChange.forEach(i=>i(o))},[n,r,t]),null});xo.displayName="SelectionListener";const yu=t=>!!t.onSelectionChange;function wu({onSelectionChange:t}){const e=J(yu);return t||e?N.createElement(xo,{onSelectionChange:t}):null}const xu=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function Zt(t,e){b.useEffect(()=>{typeof t<"u"&&e(t)},[t])}function W(t,e,n){b.useEffect(()=>{typeof e<"u"&&n({[t]:e})},[e])}const vu=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:o,onConnectStart:i,onConnectEnd:s,onClickConnectStart:c,onClickConnectEnd:a,nodesDraggable:l,nodesConnectable:u,nodesFocusable:f,edgesFocusable:h,edgesUpdatable:p,elevateNodesOnSelect:v,minZoom:m,maxZoom:_,nodeExtent:g,onNodesChange:E,onEdgesChange:A,elementsSelectable:y,connectionMode:M,snapGrid:$,snapToGrid:R,translateExtent:H,connectOnClick:z,defaultEdgeOptions:B,fitView:P,fitViewOptions:L,onNodesDelete:V,onEdgesDelete:d,onNodeDrag:S,onNodeDragStart:x,onNodeDragStop:T,onSelectionDrag:I,onSelectionDragStart:w,onSelectionDragStop:C,noPanClassName:k,nodeOrigin:D,rfId:O,autoPanOnConnect:F,autoPanOnNodeDrag:X,onError:G,connectionRadius:Z,isValidConnection:K,nodeDragThreshold:j})=>{const{setNodes:q,setEdges:ft,setDefaultNodesAndEdges:at,setMinZoom:dt,setMaxZoom:ut,setTranslateExtent:et,setNodeExtent:yt,reset:Q}=J(xu,ot),U=nt();return b.useEffect(()=>{const st=r==null?void 0:r.map(It=>({...It,...B}));return at(n,st),()=>{Q()}},[]),W("defaultEdgeOptions",B,U.setState),W("connectionMode",M,U.setState),W("onConnect",o,U.setState),W("onConnectStart",i,U.setState),W("onConnectEnd",s,U.setState),W("onClickConnectStart",c,U.setState),W("onClickConnectEnd",a,U.setState),W("nodesDraggable",l,U.setState),W("nodesConnectable",u,U.setState),W("nodesFocusable",f,U.setState),W("edgesFocusable",h,U.setState),W("edgesUpdatable",p,U.setState),W("elementsSelectable",y,U.setState),W("elevateNodesOnSelect",v,U.setState),W("snapToGrid",R,U.setState),W("snapGrid",$,U.setState),W("onNodesChange",E,U.setState),W("onEdgesChange",A,U.setState),W("connectOnClick",z,U.setState),W("fitViewOnInit",P,U.setState),W("fitViewOnInitOptions",L,U.setState),W("onNodesDelete",V,U.setState),W("onEdgesDelete",d,U.setState),W("onNodeDrag",S,U.setState),W("onNodeDragStart",x,U.setState),W("onNodeDragStop",T,U.setState),W("onSelectionDrag",I,U.setState),W("onSelectionDragStart",w,U.setState),W("onSelectionDragStop",C,U.setState),W("noPanClassName",k,U.setState),W("nodeOrigin",D,U.setState),W("rfId",O,U.setState),W("autoPanOnConnect",F,U.setState),W("autoPanOnNodeDrag",X,U.setState),W("onError",G,U.setState),W("connectionRadius",Z,U.setState),W("isValidConnection",K,U.setState),W("nodeDragThreshold",j,U.setState),Zt(t,q),Zt(e,ft),Zt(m,dt),Zt(_,ut),Zt(H,et),Zt(g,yt),null},fr={display:"none"},_u={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},vo="react-flow__node-desc",_o="react-flow__edge-desc",Eu="react-flow__aria-live",Su=t=>t.ariaLiveMessage;function bu({rfId:t}){const e=J(Su);return N.createElement("div",{id:`${Eu}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:_u},e)}function Nu({rfId:t,disableKeyboardA11y:e}){return N.createElement(N.Fragment,null,N.createElement("div",{id:`${vo}-${t}`,style:fr},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),N.createElement("div",{id:`${_o}-${t}`,style:fr},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&N.createElement(bu,{rfId:t}))}var ve=(t=null,e={actInsideInputWithModifier:!0})=>{const[n,r]=b.useState(!1),o=b.useRef(!1),i=b.useRef(new Set([])),[s,c]=b.useMemo(()=>{if(t!==null){const l=(Array.isArray(t)?t:[t]).filter(f=>typeof f=="string").map(f=>f.split("+")),u=l.reduce((f,h)=>f.concat(...h),[]);return[l,u]}return[[],[]]},[t]);return b.useEffect(()=>{const a=typeof document<"u"?document:null,l=(e==null?void 0:e.target)||a;if(t!==null){const u=p=>{if(o.current=p.ctrlKey||p.metaKey||p.shiftKey,(!o.current||o.current&&!e.actInsideInputWithModifier)&&pn(p))return!1;const m=hr(p.code,c);i.current.add(p[m]),dr(s,i.current,!1)&&(p.preventDefault(),r(!0))},f=p=>{if((!o.current||o.current&&!e.actInsideInputWithModifier)&&pn(p))return!1;const m=hr(p.code,c);dr(s,i.current,!0)?(r(!1),i.current.clear()):i.current.delete(p[m]),p.key==="Meta"&&i.current.clear(),o.current=!1},h=()=>{i.current.clear(),r(!1)};return l==null||l.addEventListener("keydown",u),l==null||l.addEventListener("keyup",f),window.addEventListener("blur",h),()=>{l==null||l.removeEventListener("keydown",u),l==null||l.removeEventListener("keyup",f),window.removeEventListener("blur",h)}}},[t,r]),n};function dr(t,e,n){return t.filter(r=>n||r.length===e.size).some(r=>r.every(o=>e.has(o)))}function hr(t,e){return e.includes(t)?"code":"key"}function Eo(t,e,n,r){var c,a;const o=t.parentNode||t.parentId;if(!o)return n;const i=e.get(o),s=te(i,r);return Eo(i,e,{x:(n.x??0)+s.x,y:(n.y??0)+s.y,z:(((c=i[tt])==null?void 0:c.z)??0)>(n.z??0)?((a=i[tt])==null?void 0:a.z)??0:n.z??0},r)}function So(t,e,n){t.forEach(r=>{var i;const o=r.parentNode||r.parentId;if(o&&!t.has(o))throw new Error(`Parent node ${o} not found`);if(o||n!=null&&n[r.id]){const{x:s,y:c,z:a}=Eo(r,t,{...r.position,z:((i=r[tt])==null?void 0:i.z)??0},e);r.positionAbsolute={x:s,y:c},r[tt].z=a,n!=null&&n[r.id]&&(r[tt].isParent=!0)}})}function rn(t,e,n,r){const o=new Map,i={},s=r?1e3:0;return t.forEach(c=>{var p;const a=(lt(c.zIndex)?c.zIndex:0)+(c.selected?s:0),l=e.get(c.id),u={...c,positionAbsolute:{x:c.position.x,y:c.position.y}},f=c.parentNode||c.parentId;f&&(i[f]=!0);const h=(l==null?void 0:l.type)&&(l==null?void 0:l.type)!==c.type;Object.defineProperty(u,tt,{enumerable:!1,value:{handleBounds:h||(p=l==null?void 0:l[tt])==null?void 0:p.handleBounds,z:a}}),o.set(c.id,u)}),So(o,n,i),o}function bo(t,e={}){const{getNodes:n,width:r,height:o,minZoom:i,maxZoom:s,d3Zoom:c,d3Selection:a,fitViewOnInitDone:l,fitViewOnInit:u,nodeOrigin:f}=t(),h=e.initial&&!l&&u;if(c&&a&&(h||!e.initial)){const v=n().filter(_=>{var E;const g=e.includeHiddenNodes?_.width&&_.height:!_.hidden;return(E=e.nodes)!=null&&E.length?g&&e.nodes.some(A=>A.id===_.id):g}),m=v.every(_=>_.width&&_.height);if(v.length>0&&m){const _=kn(v,f),{x:g,y:E,zoom:A}=ao(_,r,o,e.minZoom??i,e.maxZoom??s,e.padding??.1),y=$t.translate(g,E).scale(A);return typeof e.duration=="number"&&e.duration>0?c.transform(Bt(a,e.duration),y):c.transform(a,y),!0}}return!1}function Au(t,e){return t.forEach(n=>{const r=e.get(n.id);r&&e.set(r.id,{...r,[tt]:r[tt],selected:n.selected})}),new Map(e)}function Cu(t,e){return e.map(n=>{const r=t.find(o=>o.id===n.id);return r&&(n.selected=r.selected),n})}function Ce({changedNodes:t,changedEdges:e,get:n,set:r}){const{nodeInternals:o,edges:i,onNodesChange:s,onEdgesChange:c,hasDefaultNodes:a,hasDefaultEdges:l}=n();t!=null&&t.length&&(a&&r({nodeInternals:Au(t,o)}),s==null||s(t)),e!=null&&e.length&&(l&&r({edges:Cu(e,i)}),c==null||c(e))}const Kt=()=>{},Tu={zoomIn:Kt,zoomOut:Kt,zoomTo:Kt,getZoom:()=>1,setViewport:Kt,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Kt,fitBounds:Kt,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},Mu=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),$u=()=>{const t=nt(),{d3Zoom:e,d3Selection:n}=J(Mu,ot);return b.useMemo(()=>n&&e?{zoomIn:o=>e.scaleBy(Bt(n,o==null?void 0:o.duration),1.2),zoomOut:o=>e.scaleBy(Bt(n,o==null?void 0:o.duration),1/1.2),zoomTo:(o,i)=>e.scaleTo(Bt(n,i==null?void 0:i.duration),o),getZoom:()=>t.getState().transform[2],setViewport:(o,i)=>{const[s,c,a]=t.getState().transform,l=$t.translate(o.x??s,o.y??c).scale(o.zoom??a);e.transform(Bt(n,i==null?void 0:i.duration),l)},getViewport:()=>{const[o,i,s]=t.getState().transform;return{x:o,y:i,zoom:s}},fitView:o=>bo(t.getState,o),setCenter:(o,i,s)=>{const{width:c,height:a,maxZoom:l}=t.getState(),u=typeof(s==null?void 0:s.zoom)<"u"?s.zoom:l,f=c/2-o*u,h=a/2-i*u,p=$t.translate(f,h).scale(u);e.transform(Bt(n,s==null?void 0:s.duration),p)},fitBounds:(o,i)=>{const{width:s,height:c,minZoom:a,maxZoom:l}=t.getState(),{x:u,y:f,zoom:h}=ao(o,s,c,a,l,(i==null?void 0:i.padding)??.1),p=$t.translate(u,f).scale(h);e.transform(Bt(n,i==null?void 0:i.duration),p)},project:o=>{const{transform:i,snapToGrid:s,snapGrid:c}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),yn(o,i,s,c)},screenToFlowPosition:o=>{const{transform:i,snapToGrid:s,snapGrid:c,domNode:a}=t.getState();if(!a)return o;const{x:l,y:u}=a.getBoundingClientRect(),f={x:o.x-l,y:o.y-u};return yn(f,i,s,c)},flowToScreenPosition:o=>{const{transform:i,domNode:s}=t.getState();if(!s)return o;const{x:c,y:a}=s.getBoundingClientRect(),l=io(o,i);return{x:l.x+c,y:l.y+a}},viewportInitialized:!0}:Tu,[e,n])};function Pn(){const t=$u(),e=nt(),n=b.useCallback(()=>e.getState().getNodes().map(m=>({...m})),[]),r=b.useCallback(m=>e.getState().nodeInternals.get(m),[]),o=b.useCallback(()=>{const{edges:m=[]}=e.getState();return m.map(_=>({..._}))},[]),i=b.useCallback(m=>{const{edges:_=[]}=e.getState();return _.find(g=>g.id===m)},[]),s=b.useCallback(m=>{const{getNodes:_,setNodes:g,hasDefaultNodes:E,onNodesChange:A}=e.getState(),y=_(),M=typeof m=="function"?m(y):m;if(E)g(M);else if(A){const $=M.length===0?y.map(R=>({type:"remove",id:R.id})):M.map(R=>({item:R,type:"reset"}));A($)}},[]),c=b.useCallback(m=>{const{edges:_=[],setEdges:g,hasDefaultEdges:E,onEdgesChange:A}=e.getState(),y=typeof m=="function"?m(_):m;if(E)g(y);else if(A){const M=y.length===0?_.map($=>({type:"remove",id:$.id})):y.map($=>({item:$,type:"reset"}));A(M)}},[]),a=b.useCallback(m=>{const _=Array.isArray(m)?m:[m],{getNodes:g,setNodes:E,hasDefaultNodes:A,onNodesChange:y}=e.getState();if(A){const $=[...g(),..._];E($)}else if(y){const M=_.map($=>({item:$,type:"add"}));y(M)}},[]),l=b.useCallback(m=>{const _=Array.isArray(m)?m:[m],{edges:g=[],setEdges:E,hasDefaultEdges:A,onEdgesChange:y}=e.getState();if(A)E([...g,..._]);else if(y){const M=_.map($=>({item:$,type:"add"}));y(M)}},[]),u=b.useCallback(()=>{const{getNodes:m,edges:_=[],transform:g}=e.getState(),[E,A,y]=g;return{nodes:m().map(M=>({...M})),edges:_.map(M=>({...M})),viewport:{x:E,y:A,zoom:y}}},[]),f=b.useCallback(({nodes:m,edges:_})=>{const{nodeInternals:g,getNodes:E,edges:A,hasDefaultNodes:y,hasDefaultEdges:M,onNodesDelete:$,onEdgesDelete:R,onNodesChange:H,onEdgesChange:z}=e.getState(),B=(m||[]).map(S=>S.id),P=(_||[]).map(S=>S.id),L=E().reduce((S,x)=>{const T=x.parentNode||x.parentId,I=!B.includes(x.id)&&T&&S.find(C=>C.id===T);return(typeof x.deletable=="boolean"?x.deletable:!0)&&(B.includes(x.id)||I)&&S.push(x),S},[]),V=A.filter(S=>typeof S.deletable=="boolean"?S.deletable:!0),d=V.filter(S=>P.includes(S.id));if(L||d){const S=co(L,V),x=[...d,...S],T=x.reduce((I,w)=>(I.includes(w.id)||I.push(w.id),I),[]);if((M||y)&&(M&&e.setState({edges:A.filter(I=>!T.includes(I.id))}),y&&(L.forEach(I=>{g.delete(I.id)}),e.setState({nodeInternals:new Map(g)}))),T.length>0&&(R==null||R(x),z&&z(T.map(I=>({id:I,type:"remove"})))),L.length>0&&($==null||$(L),H)){const I=L.map(w=>({id:w.id,type:"remove"}));H(I)}}},[]),h=b.useCallback(m=>{const _=qa(m),g=_?null:e.getState().nodeInternals.get(m.id);return!_&&!g?[null,null,_]:[_?m:or(g),g,_]},[]),p=b.useCallback((m,_=!0,g)=>{const[E,A,y]=h(m);return E?(g||e.getState().getNodes()).filter(M=>{if(!y&&(M.id===A.id||!M.positionAbsolute))return!1;const $=or(M),R=hn($,E);return _&&R>0||R>=E.width*E.height}):[]},[]),v=b.useCallback((m,_,g=!0)=>{const[E]=h(m);if(!E)return!1;const A=hn(E,_);return g&&A>0||A>=E.width*E.height},[]);return b.useMemo(()=>({...t,getNodes:n,getNode:r,getEdges:o,getEdge:i,setNodes:s,setEdges:c,addNodes:a,addEdges:l,toObject:u,deleteElements:f,getIntersectingNodes:p,isNodeIntersecting:v}),[t,n,r,o,i,s,c,a,l,u,f,p,v])}const zu={actInsideInputWithModifier:!1};var Iu=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const n=nt(),{deleteElements:r}=Pn(),o=ve(t,zu),i=ve(e);b.useEffect(()=>{if(o){const{edges:s,getNodes:c}=n.getState(),a=c().filter(u=>u.selected),l=s.filter(u=>u.selected);r({nodes:a,edges:l}),n.setState({nodesSelectionActive:!1})}},[o]),b.useEffect(()=>{n.setState({multiSelectionActive:i})},[i])};function ku(t){const e=nt();b.useEffect(()=>{let n;const r=()=>{var i,s;if(!t.current)return;const o=An(t.current);(o.height===0||o.width===0)&&((s=(i=e.getState()).onError)==null||s.call(i,"004",At.error004())),e.setState({width:o.width||500,height:o.height||500})};return r(),window.addEventListener("resize",r),t.current&&(n=new ResizeObserver(()=>r()),n.observe(t.current)),()=>{window.removeEventListener("resize",r),n&&t.current&&n.unobserve(t.current)}},[])}const Hn={position:"absolute",width:"100%",height:"100%",top:0,left:0},Du=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,Te=t=>({x:t.x,y:t.y,zoom:t.k}),qt=(t,e)=>t.target.closest(`.${e}`),pr=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),gr=t=>{const e=t.ctrlKey&&He()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},Ru=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),Pu=({onMove:t,onMoveStart:e,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:o=!0,zoomOnPinch:i=!0,panOnScroll:s=!1,panOnScrollSpeed:c=.5,panOnScrollMode:a=Lt.Free,zoomOnDoubleClick:l=!0,elementsSelectable:u,panOnDrag:f=!0,defaultViewport:h,translateExtent:p,minZoom:v,maxZoom:m,zoomActivationKeyCode:_,preventScrolling:g=!0,children:E,noWheelClassName:A,noPanClassName:y})=>{const M=b.useRef(),$=nt(),R=b.useRef(!1),H=b.useRef(!1),z=b.useRef(null),B=b.useRef({x:0,y:0,zoom:0}),{d3Zoom:P,d3Selection:L,d3ZoomHandler:V,userSelectionActive:d}=J(Ru,ot),S=ve(_),x=b.useRef(0),T=b.useRef(!1),I=b.useRef();return ku(z),b.useEffect(()=>{if(z.current){const w=z.current.getBoundingClientRect(),C=Oa().scaleExtent([v,m]).translateExtent(p),k=pt(z.current).call(C),D=$t.translate(h.x,h.y).scale(oe(h.zoom,v,m)),O=[[0,0],[w.width,w.height]],F=C.constrain()(D,O,p);C.transform(k,F),C.wheelDelta(gr),$.setState({d3Zoom:C,d3Selection:k,d3ZoomHandler:k.on("wheel.zoom"),transform:[F.x,F.y,F.k],domNode:z.current.closest(".react-flow")})}},[]),b.useEffect(()=>{L&&P&&(s&&!S&&!d?L.on("wheel.zoom",w=>{if(qt(w,A))return!1;w.preventDefault(),w.stopImmediatePropagation();const C=L.property("__zoom").k||1;if(w.ctrlKey&&i){const K=xt(w),j=gr(w),q=C*Math.pow(2,j);P.scaleTo(L,q,K,w);return}const k=w.deltaMode===1?20:1;let D=a===Lt.Vertical?0:w.deltaX*k,O=a===Lt.Horizontal?0:w.deltaY*k;!He()&&w.shiftKey&&a!==Lt.Vertical&&(D=w.deltaY*k,O=0),P.translateBy(L,-(D/C)*c,-(O/C)*c,{internal:!0});const F=Te(L.property("__zoom")),{onViewportChangeStart:X,onViewportChange:G,onViewportChangeEnd:Z}=$.getState();clearTimeout(I.current),T.current||(T.current=!0,e==null||e(w,F),X==null||X(F)),T.current&&(t==null||t(w,F),G==null||G(F),I.current=setTimeout(()=>{n==null||n(w,F),Z==null||Z(F),T.current=!1},150))},{passive:!1}):typeof V<"u"&&L.on("wheel.zoom",function(w,C){if(!g&&w.type==="wheel"&&!w.ctrlKey||qt(w,A))return null;w.preventDefault(),V.call(this,w,C)},{passive:!1}))},[d,s,a,L,P,V,S,i,g,A,e,t,n]),b.useEffect(()=>{P&&P.on("start",w=>{var D,O;if(!w.sourceEvent||w.sourceEvent.internal)return null;x.current=(D=w.sourceEvent)==null?void 0:D.button;const{onViewportChangeStart:C}=$.getState(),k=Te(w.transform);R.current=!0,B.current=k,((O=w.sourceEvent)==null?void 0:O.type)==="mousedown"&&$.setState({paneDragging:!0}),C==null||C(k),e==null||e(w.sourceEvent,k)})},[P,e]),b.useEffect(()=>{P&&(d&&!R.current?P.on("zoom",null):d||P.on("zoom",w=>{var k;const{onViewportChange:C}=$.getState();if($.setState({transform:[w.transform.x,w.transform.y,w.transform.k]}),H.current=!!(r&&pr(f,x.current??0)),(t||C)&&!((k=w.sourceEvent)!=null&&k.internal)){const D=Te(w.transform);C==null||C(D),t==null||t(w.sourceEvent,D)}}))},[d,P,t,f,r]),b.useEffect(()=>{P&&P.on("end",w=>{if(!w.sourceEvent||w.sourceEvent.internal)return null;const{onViewportChangeEnd:C}=$.getState();if(R.current=!1,$.setState({paneDragging:!1}),r&&pr(f,x.current??0)&&!H.current&&r(w.sourceEvent),H.current=!1,(n||C)&&Du(B.current,w.transform)){const k=Te(w.transform);B.current=k,clearTimeout(M.current),M.current=setTimeout(()=>{C==null||C(k),n==null||n(w.sourceEvent,k)},s?150:0)}})},[P,s,f,n,r]),b.useEffect(()=>{P&&P.filter(w=>{const C=S||o,k=i&&w.ctrlKey;if((f===!0||Array.isArray(f)&&f.includes(1))&&w.button===1&&w.type==="mousedown"&&(qt(w,"react-flow__node")||qt(w,"react-flow__edge")))return!0;if(!f&&!C&&!s&&!l&&!i||d||!l&&w.type==="dblclick"||qt(w,A)&&w.type==="wheel"||qt(w,y)&&(w.type!=="wheel"||s&&w.type==="wheel"&&!S)||!i&&w.ctrlKey&&w.type==="wheel"||!C&&!s&&!k&&w.type==="wheel"||!f&&(w.type==="mousedown"||w.type==="touchstart")||Array.isArray(f)&&!f.includes(w.button)&&w.type==="mousedown")return!1;const D=Array.isArray(f)&&f.includes(w.button)||!w.button||w.button<=1;return(!w.ctrlKey||w.type==="wheel")&&D})},[d,P,o,i,s,l,f,u,S]),N.createElement("div",{className:"react-flow__renderer",ref:z,style:Hn},E)},Hu=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function Vu(){const{userSelectionActive:t,userSelectionRect:e}=J(Hu,ot);return t&&e?N.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function mr(t,e){const n=e.parentNode||e.parentId,r=t.find(o=>o.id===n);if(r){const o=e.position.x+e.width-r.width,i=e.position.y+e.height-r.height;if(o>0||i>0||e.position.x<0||e.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,o>0&&(r.style.width+=o),i>0&&(r.style.height+=i),e.position.x<0){const s=Math.abs(e.position.x);r.position.x=r.position.x-s,r.style.width+=s,e.position.x=0}if(e.position.y<0){const s=Math.abs(e.position.y);r.position.y=r.position.y-s,r.style.height+=s,e.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function Bu(t,e){if(t.some(r=>r.type==="reset"))return t.filter(r=>r.type==="reset").map(r=>r.item);const n=t.filter(r=>r.type==="add").map(r=>r.item);return e.reduce((r,o)=>{const i=t.filter(c=>c.id===o.id);if(i.length===0)return r.push(o),r;const s={...o};for(const c of i)if(c)switch(c.type){case"select":{s.selected=c.selected;break}case"position":{typeof c.position<"u"&&(s.position=c.position),typeof c.positionAbsolute<"u"&&(s.positionAbsolute=c.positionAbsolute),typeof c.dragging<"u"&&(s.dragging=c.dragging),s.expandParent&&mr(r,s);break}case"dimensions":{typeof c.dimensions<"u"&&(s.width=c.dimensions.width,s.height=c.dimensions.height),typeof c.updateStyle<"u"&&(s.style={...s.style||{},...c.dimensions}),typeof c.resizing=="boolean"&&(s.resizing=c.resizing),s.expandParent&&mr(r,s);break}case"remove":return r}return r.push(s),r},n)}function Lu(t,e){return Bu(t,e)}const Tt=(t,e)=>({id:t,type:"select",selected:e});function Jt(t,e){return t.reduce((n,r)=>{const o=e.includes(r.id);return!r.selected&&o?(r.selected=!0,n.push(Tt(r.id,!0))):r.selected&&!o&&(r.selected=!1,n.push(Tt(r.id,!1))),n},[])}const on=(t,e)=>n=>{n.target===e.current&&(t==null||t(n))},Fu=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),No=b.memo(({isSelecting:t,selectionMode:e=xe.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:o,onPaneClick:i,onPaneContextMenu:s,onPaneScroll:c,onPaneMouseEnter:a,onPaneMouseMove:l,onPaneMouseLeave:u,children:f})=>{const h=b.useRef(null),p=nt(),v=b.useRef(0),m=b.useRef(0),_=b.useRef(),{userSelectionActive:g,elementsSelectable:E,dragging:A}=J(Fu,ot),y=()=>{p.setState({userSelectionActive:!1,userSelectionRect:null}),v.current=0,m.current=0},M=V=>{i==null||i(V),p.getState().resetSelectedElements(),p.setState({nodesSelectionActive:!1})},$=V=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){V.preventDefault();return}s==null||s(V)},R=c?V=>c(V):void 0,H=V=>{const{resetSelectedElements:d,domNode:S}=p.getState();if(_.current=S==null?void 0:S.getBoundingClientRect(),!E||!t||V.button!==0||V.target!==h.current||!_.current)return;const{x,y:T}=zt(V,_.current);d(),p.setState({userSelectionRect:{width:0,height:0,startX:x,startY:T,x,y:T}}),r==null||r(V)},z=V=>{const{userSelectionRect:d,nodeInternals:S,edges:x,transform:T,onNodesChange:I,onEdgesChange:w,nodeOrigin:C,getNodes:k}=p.getState();if(!t||!_.current||!d)return;p.setState({userSelectionActive:!0,nodesSelectionActive:!1});const D=zt(V,_.current),O=d.startX??0,F=d.startY??0,X={...d,x:D.x<O?D.x:O,y:D.y<F?D.y:F,width:Math.abs(D.x-O),height:Math.abs(D.y-F)},G=k(),Z=so(S,X,T,e===xe.Partial,!0,C),K=co(Z,x).map(q=>q.id),j=Z.map(q=>q.id);if(v.current!==j.length){v.current=j.length;const q=Jt(G,j);q.length&&(I==null||I(q))}if(m.current!==K.length){m.current=K.length;const q=Jt(x,K);q.length&&(w==null||w(q))}p.setState({userSelectionRect:X})},B=V=>{if(V.button!==0)return;const{userSelectionRect:d}=p.getState();!g&&d&&V.target===h.current&&(M==null||M(V)),p.setState({nodesSelectionActive:v.current>0}),y(),o==null||o(V)},P=V=>{g&&(p.setState({nodesSelectionActive:v.current>0}),o==null||o(V)),y()},L=E&&(t||g);return N.createElement("div",{className:it(["react-flow__pane",{dragging:A,selection:t}]),onClick:L?void 0:on(M,h),onContextMenu:on($,h),onWheel:on(R,h),onMouseEnter:L?void 0:a,onMouseDown:L?H:void 0,onMouseMove:L?z:l,onMouseUp:L?B:void 0,onMouseLeave:L?P:u,ref:h,style:Hn},f,N.createElement(Vu,null))});No.displayName="Pane";function Ao(t,e){const n=t.parentNode||t.parentId;if(!n)return!1;const r=e.get(n);return r?r.selected?!0:Ao(r,e):!1}function yr(t,e,n){let r=t;do{if(r!=null&&r.matches(e))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function Ou(t,e,n,r){return Array.from(t.values()).filter(o=>(o.selected||o.id===r)&&(!o.parentNode||o.parentId||!Ao(o,t))&&(o.draggable||e&&typeof o.draggable>"u")).map(o=>{var i,s;return{id:o.id,position:o.position||{x:0,y:0},positionAbsolute:o.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((i=o.positionAbsolute)==null?void 0:i.x)??0),y:n.y-(((s=o.positionAbsolute)==null?void 0:s.y)??0)},delta:{x:0,y:0},extent:o.extent,parentNode:o.parentNode||o.parentId,parentId:o.parentNode||o.parentId,width:o.width,height:o.height,expandParent:o.expandParent}})}function Yu(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function Co(t,e,n,r,o=[0,0],i){const s=Yu(t,t.extent||r);let c=s;const a=t.parentNode||t.parentId;if(t.extent==="parent"&&!t.expandParent)if(a&&t.width&&t.height){const f=n.get(a),{x:h,y:p}=te(f,o).positionAbsolute;c=f&&lt(h)&&lt(p)&&lt(f.width)&&lt(f.height)?[[h+t.width*o[0],p+t.height*o[1]],[h+f.width-t.width+t.width*o[0],p+f.height-t.height+t.height*o[1]]]:c}else i==null||i("005",At.error005()),c=s;else if(t.extent&&a&&t.extent!=="parent"){const f=n.get(a),{x:h,y:p}=te(f,o).positionAbsolute;c=[[t.extent[0][0]+h,t.extent[0][1]+p],[t.extent[1][0]+h,t.extent[1][1]+p]]}let l={x:0,y:0};if(a){const f=n.get(a);l=te(f,o).positionAbsolute}const u=c&&c!=="parent"?Cn(e,c):e;return{position:{x:u.x-l.x,y:u.y-l.y},positionAbsolute:u}}function sn({nodeId:t,dragItems:e,nodeInternals:n}){const r=e.map(o=>({...n.get(o.id),position:o.position,positionAbsolute:o.positionAbsolute}));return[t?r.find(o=>o.id===t):r[0],r]}const wr=(t,e,n,r)=>{const o=e.querySelectorAll(t);if(!o||!o.length)return null;const i=Array.from(o),s=e.getBoundingClientRect(),c={x:s.width*r[0],y:s.height*r[1]};return i.map(a=>{const l=a.getBoundingClientRect();return{id:a.getAttribute("data-handleid"),position:a.getAttribute("data-handlepos"),x:(l.left-s.left-c.x)/n,y:(l.top-s.top-c.y)/n,...An(a)}})};function de(t,e,n){return n===void 0?n:r=>{const o=e().nodeInternals.get(t);o&&n(r,{...o})}}function xn({id:t,store:e,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:o,unselectNodesAndEdges:i,multiSelectionActive:s,nodeInternals:c,onError:a}=e.getState(),l=c.get(t);if(!l){a==null||a("012",At.error012(t));return}e.setState({nodesSelectionActive:!1}),l.selected?(n||l.selected&&s)&&(i({nodes:[l],edges:[]}),requestAnimationFrame(()=>{var u;return(u=r==null?void 0:r.current)==null?void 0:u.blur()})):o([t])}function Uu(){const t=nt();return b.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:o,snapToGrid:i}=t.getState(),s=n.touches?n.touches[0].clientX:n.clientX,c=n.touches?n.touches[0].clientY:n.clientY,a={x:(s-r[0])/r[2],y:(c-r[1])/r[2]};return{xSnapped:i?o[0]*Math.round(a.x/o[0]):a.x,ySnapped:i?o[1]*Math.round(a.y/o[1]):a.y,...a}},[])}function cn(t){return(e,n,r)=>t==null?void 0:t(e,r)}function To({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:r,nodeId:o,isSelectable:i,selectNodesOnDrag:s}){const c=nt(),[a,l]=b.useState(!1),u=b.useRef([]),f=b.useRef({x:null,y:null}),h=b.useRef(0),p=b.useRef(null),v=b.useRef({x:0,y:0}),m=b.useRef(null),_=b.useRef(!1),g=b.useRef(!1),E=b.useRef(!1),A=Uu();return b.useEffect(()=>{if(t!=null&&t.current){const y=pt(t.current),M=({x:H,y:z})=>{const{nodeInternals:B,onNodeDrag:P,onSelectionDrag:L,updateNodePositions:V,nodeExtent:d,snapGrid:S,snapToGrid:x,nodeOrigin:T,onError:I}=c.getState();f.current={x:H,y:z};let w=!1,C={x:0,y:0,x2:0,y2:0};if(u.current.length>1&&d){const D=kn(u.current,T);C=Tn(D)}if(u.current=u.current.map(D=>{const O={x:H-D.distance.x,y:z-D.distance.y};x&&(O.x=S[0]*Math.round(O.x/S[0]),O.y=S[1]*Math.round(O.y/S[1]));const F=[[d[0][0],d[0][1]],[d[1][0],d[1][1]]];u.current.length>1&&d&&!D.extent&&(F[0][0]=D.positionAbsolute.x-C.x+d[0][0],F[1][0]=D.positionAbsolute.x+(D.width??0)-C.x2+d[1][0],F[0][1]=D.positionAbsolute.y-C.y+d[0][1],F[1][1]=D.positionAbsolute.y+(D.height??0)-C.y2+d[1][1]);const X=Co(D,O,B,F,T,I);return w=w||D.position.x!==X.position.x||D.position.y!==X.position.y,D.position=X.position,D.positionAbsolute=X.positionAbsolute,D}),!w)return;V(u.current,!0,!0),l(!0);const k=o?P:cn(L);if(k&&m.current){const[D,O]=sn({nodeId:o,dragItems:u.current,nodeInternals:B});k(m.current,D,O)}},$=()=>{if(!p.current)return;const[H,z]=Qr(v.current,p.current);if(H!==0||z!==0){const{transform:B,panBy:P}=c.getState();f.current.x=(f.current.x??0)-H/B[2],f.current.y=(f.current.y??0)-z/B[2],P({x:H,y:z})&&M(f.current)}h.current=requestAnimationFrame($)},R=H=>{var T;const{nodeInternals:z,multiSelectionActive:B,nodesDraggable:P,unselectNodesAndEdges:L,onNodeDragStart:V,onSelectionDragStart:d}=c.getState();g.current=!0;const S=o?V:cn(d);(!s||!i)&&!B&&o&&((T=z.get(o))!=null&&T.selected||L()),o&&i&&s&&xn({id:o,store:c,nodeRef:t});const x=A(H);if(f.current=x,u.current=Ou(z,P,x,o),S&&u.current){const[I,w]=sn({nodeId:o,dragItems:u.current,nodeInternals:z});S(H.sourceEvent,I,w)}};if(e)y.on(".drag",null);else{const H=bc().on("start",z=>{const{domNode:B,nodeDragThreshold:P}=c.getState();P===0&&R(z),E.current=!1;const L=A(z);f.current=L,p.current=(B==null?void 0:B.getBoundingClientRect())||null,v.current=zt(z.sourceEvent,p.current)}).on("drag",z=>{var V,d;const B=A(z),{autoPanOnNodeDrag:P,nodeDragThreshold:L}=c.getState();if(z.sourceEvent.type==="touchmove"&&z.sourceEvent.touches.length>1&&(E.current=!0),!E.current){if(!_.current&&g.current&&P&&(_.current=!0,$()),!g.current){const S=B.xSnapped-(((V=f==null?void 0:f.current)==null?void 0:V.x)??0),x=B.ySnapped-(((d=f==null?void 0:f.current)==null?void 0:d.y)??0);Math.sqrt(S*S+x*x)>L&&R(z)}(f.current.x!==B.xSnapped||f.current.y!==B.ySnapped)&&u.current&&g.current&&(m.current=z.sourceEvent,v.current=zt(z.sourceEvent,p.current),M(B))}}).on("end",z=>{if(!(!g.current||E.current)&&(l(!1),_.current=!1,g.current=!1,cancelAnimationFrame(h.current),u.current)){const{updateNodePositions:B,nodeInternals:P,onNodeDragStop:L,onSelectionDragStop:V}=c.getState(),d=o?L:cn(V);if(B(u.current,!1,!1),d){const[S,x]=sn({nodeId:o,dragItems:u.current,nodeInternals:P});d(z.sourceEvent,S,x)}}}).filter(z=>{const B=z.target;return!z.button&&(!n||!yr(B,`.${n}`,t))&&(!r||yr(B,r,t))});return y.call(H),()=>{y.on(".drag",null)}}}},[t,e,n,r,i,c,o,s,A]),a}function Mo(){const t=nt();return b.useCallback(n=>{const{nodeInternals:r,nodeExtent:o,updateNodePositions:i,getNodes:s,snapToGrid:c,snapGrid:a,onError:l,nodesDraggable:u}=t.getState(),f=s().filter(E=>E.selected&&(E.draggable||u&&typeof E.draggable>"u")),h=c?a[0]:5,p=c?a[1]:5,v=n.isShiftPressed?4:1,m=n.x*h*v,_=n.y*p*v,g=f.map(E=>{if(E.positionAbsolute){const A={x:E.positionAbsolute.x+m,y:E.positionAbsolute.y+_};c&&(A.x=a[0]*Math.round(A.x/a[0]),A.y=a[1]*Math.round(A.y/a[1]));const{positionAbsolute:y,position:M}=Co(E,A,r,o,void 0,l);E.position=M,E.positionAbsolute=y}return E});i(g,!0,!1)},[])}const ee={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var he=t=>{const e=({id:n,type:r,data:o,xPos:i,yPos:s,xPosOrigin:c,yPosOrigin:a,selected:l,onClick:u,onMouseEnter:f,onMouseMove:h,onMouseLeave:p,onContextMenu:v,onDoubleClick:m,style:_,className:g,isDraggable:E,isSelectable:A,isConnectable:y,isFocusable:M,selectNodesOnDrag:$,sourcePosition:R,targetPosition:H,hidden:z,resizeObserver:B,dragHandle:P,zIndex:L,isParent:V,noDragClassName:d,noPanClassName:S,initialized:x,disableKeyboardA11y:T,ariaLabel:I,rfId:w,hasHandleBounds:C})=>{const k=nt(),D=b.useRef(null),O=b.useRef(null),F=b.useRef(R),X=b.useRef(H),G=b.useRef(r),Z=A||E||u||f||h||p,K=Mo(),j=de(n,k.getState,f),q=de(n,k.getState,h),ft=de(n,k.getState,p),at=de(n,k.getState,v),dt=de(n,k.getState,m),ut=Q=>{const{nodeDragThreshold:U}=k.getState();if(A&&(!$||!E||U>0)&&xn({id:n,store:k,nodeRef:D}),u){const st=k.getState().nodeInternals.get(n);st&&u(Q,{...st})}},et=Q=>{if(!pn(Q)&&!T)if(jr.includes(Q.key)&&A){const U=Q.key==="Escape";xn({id:n,store:k,unselect:U,nodeRef:D})}else E&&l&&Object.prototype.hasOwnProperty.call(ee,Q.key)&&(k.setState({ariaLiveMessage:`Moved selected node ${Q.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~i}, y: ${~~s}`}),K({x:ee[Q.key].x,y:ee[Q.key].y,isShiftPressed:Q.shiftKey}))};b.useEffect(()=>()=>{O.current&&(B==null||B.unobserve(O.current),O.current=null)},[]),b.useEffect(()=>{if(D.current&&!z){const Q=D.current;(!x||!C||O.current!==Q)&&(O.current&&(B==null||B.unobserve(O.current)),B==null||B.observe(Q),O.current=Q)}},[z,x,C]),b.useEffect(()=>{const Q=G.current!==r,U=F.current!==R,st=X.current!==H;D.current&&(Q||U||st)&&(Q&&(G.current=r),U&&(F.current=R),st&&(X.current=H),k.getState().updateNodeDimensions([{id:n,nodeElement:D.current,forceUpdate:!0}]))},[n,r,R,H]);const yt=To({nodeRef:D,disabled:z||!E,noDragClassName:d,handleSelector:P,nodeId:n,isSelectable:A,selectNodesOnDrag:$});return z?null:N.createElement("div",{className:it(["react-flow__node",`react-flow__node-${r}`,{[S]:E},g,{selected:l,selectable:A,parent:V,dragging:yt}]),ref:D,style:{zIndex:L,transform:`translate(${c}px,${a}px)`,pointerEvents:Z?"all":"none",visibility:x?"visible":"hidden",..._},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:j,onMouseMove:q,onMouseLeave:ft,onContextMenu:at,onClick:ut,onDoubleClick:dt,onKeyDown:M?et:void 0,tabIndex:M?0:void 0,role:M?"button":void 0,"aria-describedby":T?void 0:`${vo}-${w}`,"aria-label":I},N.createElement(ru,{value:n},N.createElement(t,{id:n,data:o,type:r,xPos:i,yPos:s,selected:l,isConnectable:y,sourcePosition:R,targetPosition:H,dragging:yt,dragHandle:P,zIndex:L})))};return e.displayName="NodeWrapper",b.memo(e)};const Xu=t=>{const e=t.getNodes().filter(n=>n.selected);return{...kn(e,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function Wu({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const r=nt(),{width:o,height:i,x:s,y:c,transformString:a,userSelectionActive:l}=J(Xu,ot),u=Mo(),f=b.useRef(null);if(b.useEffect(()=>{var v;n||(v=f.current)==null||v.focus({preventScroll:!0})},[n]),To({nodeRef:f}),l||!o||!i)return null;const h=t?v=>{const m=r.getState().getNodes().filter(_=>_.selected);t(v,m)}:void 0,p=v=>{Object.prototype.hasOwnProperty.call(ee,v.key)&&u({x:ee[v.key].x,y:ee[v.key].y,isShiftPressed:v.shiftKey})};return N.createElement("div",{className:it(["react-flow__nodesselection","react-flow__container",e]),style:{transform:a}},N.createElement("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:h,tabIndex:n?void 0:-1,onKeyDown:n?void 0:p,style:{width:o,height:i,top:c,left:s}}))}var Gu=b.memo(Wu);const Zu=t=>t.nodesSelectionActive,$o=({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:i,onPaneScroll:s,deleteKeyCode:c,onMove:a,onMoveStart:l,onMoveEnd:u,selectionKeyCode:f,selectionOnDrag:h,selectionMode:p,onSelectionStart:v,onSelectionEnd:m,multiSelectionKeyCode:_,panActivationKeyCode:g,zoomActivationKeyCode:E,elementsSelectable:A,zoomOnScroll:y,zoomOnPinch:M,panOnScroll:$,panOnScrollSpeed:R,panOnScrollMode:H,zoomOnDoubleClick:z,panOnDrag:B,defaultViewport:P,translateExtent:L,minZoom:V,maxZoom:d,preventScrolling:S,onSelectionContextMenu:x,noWheelClassName:T,noPanClassName:I,disableKeyboardA11y:w})=>{const C=J(Zu),k=ve(f),D=ve(g),O=D||B,F=D||$,X=k||h&&O!==!0;return Iu({deleteKeyCode:c,multiSelectionKeyCode:_}),N.createElement(Pu,{onMove:a,onMoveStart:l,onMoveEnd:u,onPaneContextMenu:i,elementsSelectable:A,zoomOnScroll:y,zoomOnPinch:M,panOnScroll:F,panOnScrollSpeed:R,panOnScrollMode:H,zoomOnDoubleClick:z,panOnDrag:!k&&O,defaultViewport:P,translateExtent:L,minZoom:V,maxZoom:d,zoomActivationKeyCode:E,preventScrolling:S,noWheelClassName:T,noPanClassName:I},N.createElement(No,{onSelectionStart:v,onSelectionEnd:m,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:i,onPaneScroll:s,panOnDrag:O,isSelecting:!!X,selectionMode:p},t,C&&N.createElement(Gu,{onSelectionContextMenu:x,noPanClassName:I,disableKeyboardA11y:w})))};$o.displayName="FlowRenderer";var Ku=b.memo($o);function qu(t){return J(b.useCallback(n=>t?so(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[t]))}function Qu(t){const e={input:he(t.input||mo),default:he(t.default||wn),output:he(t.output||wo),group:he(t.group||Rn)},n={},r=Object.keys(t).filter(o=>!["input","default","output","group"].includes(o)).reduce((o,i)=>(o[i]=he(t[i]||wn),o),n);return{...e,...r}}const Ju=({x:t,y:e,width:n,height:r,origin:o})=>!n||!r?{x:t,y:e}:o[0]<0||o[1]<0||o[0]>1||o[1]>1?{x:t,y:e}:{x:t-n*o[0],y:e-r*o[1]},ju=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),zo=t=>{const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,updateNodeDimensions:i,onError:s}=J(ju,ot),c=qu(t.onlyRenderVisibleElements),a=b.useRef(),l=b.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const u=new ResizeObserver(f=>{const h=f.map(p=>({id:p.target.getAttribute("data-id"),nodeElement:p.target,forceUpdate:!0}));i(h)});return a.current=u,u},[]);return b.useEffect(()=>()=>{var u;(u=a==null?void 0:a.current)==null||u.disconnect()},[]),N.createElement("div",{className:"react-flow__nodes",style:Hn},c.map(u=>{var M,$,R;let f=u.type||"default";t.nodeTypes[f]||(s==null||s("003",At.error003(f)),f="default");const h=t.nodeTypes[f]||t.nodeTypes.default,p=!!(u.draggable||e&&typeof u.draggable>"u"),v=!!(u.selectable||o&&typeof u.selectable>"u"),m=!!(u.connectable||n&&typeof u.connectable>"u"),_=!!(u.focusable||r&&typeof u.focusable>"u"),g=t.nodeExtent?Cn(u.positionAbsolute,t.nodeExtent):u.positionAbsolute,E=(g==null?void 0:g.x)??0,A=(g==null?void 0:g.y)??0,y=Ju({x:E,y:A,width:u.width??0,height:u.height??0,origin:t.nodeOrigin});return N.createElement(h,{key:u.id,id:u.id,className:u.className,style:u.style,type:f,data:u.data,sourcePosition:u.sourcePosition||Y.Bottom,targetPosition:u.targetPosition||Y.Top,hidden:u.hidden,xPos:E,yPos:A,xPosOrigin:y.x,yPosOrigin:y.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!u.selected,isDraggable:p,isSelectable:v,isConnectable:m,isFocusable:_,resizeObserver:l,dragHandle:u.dragHandle,zIndex:((M=u[tt])==null?void 0:M.z)??0,isParent:!!(($=u[tt])!=null&&$.isParent),noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!u.width&&!!u.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:u.ariaLabel,hasHandleBounds:!!((R=u[tt])!=null&&R.handleBounds)})}))};zo.displayName="NodeRenderer";var tl=b.memo(zo);const el=(t,e,n)=>n===Y.Left?t-e:n===Y.Right?t+e:t,nl=(t,e,n)=>n===Y.Top?t-e:n===Y.Bottom?t+e:t,xr="react-flow__edgeupdater",vr=({position:t,centerX:e,centerY:n,radius:r=10,onMouseDown:o,onMouseEnter:i,onMouseOut:s,type:c})=>N.createElement("circle",{onMouseDown:o,onMouseEnter:i,onMouseOut:s,className:it([xr,`${xr}-${c}`]),cx:el(e,r,t),cy:nl(n,r,t),r,stroke:"transparent",fill:"transparent"}),rl=()=>!0;var Qt=t=>{const e=({id:n,className:r,type:o,data:i,onClick:s,onEdgeDoubleClick:c,selected:a,animated:l,label:u,labelStyle:f,labelShowBg:h,labelBgStyle:p,labelBgPadding:v,labelBgBorderRadius:m,style:_,source:g,target:E,sourceX:A,sourceY:y,targetX:M,targetY:$,sourcePosition:R,targetPosition:H,elementsSelectable:z,hidden:B,sourceHandleId:P,targetHandleId:L,onContextMenu:V,onMouseEnter:d,onMouseMove:S,onMouseLeave:x,reconnectRadius:T,onReconnect:I,onReconnectStart:w,onReconnectEnd:C,markerEnd:k,markerStart:D,rfId:O,ariaLabel:F,isFocusable:X,isReconnectable:G,pathOptions:Z,interactionWidth:K,disableKeyboardA11y:j})=>{const q=b.useRef(null),[ft,at]=b.useState(!1),[dt,ut]=b.useState(!1),et=nt(),yt=b.useMemo(()=>`url('#${mn(D,O)}')`,[D,O]),Q=b.useMemo(()=>`url('#${mn(k,O)}')`,[k,O]);if(B)return null;const U=rt=>{var wt;const{edges:ht,addSelectedEdges:Rt,unselectNodesAndEdges:Pt,multiSelectionActive:Ht}=et.getState(),Et=ht.find(ce=>ce.id===n);Et&&(z&&(et.setState({nodesSelectionActive:!1}),Et.selected&&Ht?(Pt({nodes:[],edges:[Et]}),(wt=q.current)==null||wt.blur()):Rt([n])),s&&s(rt,Et))},st=fe(n,et.getState,c),It=fe(n,et.getState,V),ie=fe(n,et.getState,d),Yt=fe(n,et.getState,S),Ut=fe(n,et.getState,x),_t=(rt,ht)=>{if(rt.button!==0)return;const{edges:Rt,isValidConnection:Pt}=et.getState(),Ht=ht?E:g,Et=(ht?L:P)||null,wt=ht?"target":"source",ce=Pt||rl,Ge=ht,ae=Rt.find(Vt=>Vt.id===n);ut(!0),w==null||w(rt,ae,wt);const Ze=Vt=>{ut(!1),C==null||C(Vt,ae,wt)};fo({event:rt,handleId:Et,nodeId:Ht,onConnect:Vt=>I==null?void 0:I(ae,Vt),isTarget:Ge,getState:et.getState,setState:et.setState,isValidConnection:ce,edgeUpdaterType:wt,onReconnectEnd:Ze})},Xt=rt=>_t(rt,!0),kt=rt=>_t(rt,!1),Dt=()=>at(!0),Wt=()=>at(!1),Gt=!z&&!s,se=rt=>{var ht;if(!j&&jr.includes(rt.key)&&z){const{unselectNodesAndEdges:Rt,addSelectedEdges:Pt,edges:Ht}=et.getState();rt.key==="Escape"?((ht=q.current)==null||ht.blur(),Rt({edges:[Ht.find(wt=>wt.id===n)]})):Pt([n])}};return N.createElement("g",{className:it(["react-flow__edge",`react-flow__edge-${o}`,r,{selected:a,animated:l,inactive:Gt,updating:ft}]),onClick:U,onDoubleClick:st,onContextMenu:It,onMouseEnter:ie,onMouseMove:Yt,onMouseLeave:Ut,onKeyDown:X?se:void 0,tabIndex:X?0:void 0,role:X?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":F===null?void 0:F||`Edge from ${g} to ${E}`,"aria-describedby":X?`${_o}-${O}`:void 0,ref:q},!dt&&N.createElement(t,{id:n,source:g,target:E,selected:a,animated:l,label:u,labelStyle:f,labelShowBg:h,labelBgStyle:p,labelBgPadding:v,labelBgBorderRadius:m,data:i,style:_,sourceX:A,sourceY:y,targetX:M,targetY:$,sourcePosition:R,targetPosition:H,sourceHandleId:P,targetHandleId:L,markerStart:yt,markerEnd:Q,pathOptions:Z,interactionWidth:K}),G&&N.createElement(N.Fragment,null,(G==="source"||G===!0)&&N.createElement(vr,{position:R,centerX:A,centerY:y,radius:T,onMouseDown:Xt,onMouseEnter:Dt,onMouseOut:Wt,type:"source"}),(G==="target"||G===!0)&&N.createElement(vr,{position:H,centerX:M,centerY:$,radius:T,onMouseDown:kt,onMouseEnter:Dt,onMouseOut:Wt,type:"target"})))};return e.displayName="EdgeWrapper",b.memo(e)};function ol(t){const e={default:Qt(t.default||Be),straight:Qt(t.bezier||zn),step:Qt(t.step||$n),smoothstep:Qt(t.step||We),simplebezier:Qt(t.simplebezier||Mn)},n={},r=Object.keys(t).filter(o=>!["default","bezier"].includes(o)).reduce((o,i)=>(o[i]=Qt(t[i]||Be),o),n);return{...e,...r}}function _r(t,e,n=null){const r=((n==null?void 0:n.x)||0)+e.x,o=((n==null?void 0:n.y)||0)+e.y,i=(n==null?void 0:n.width)||e.width,s=(n==null?void 0:n.height)||e.height;switch(t){case Y.Top:return{x:r+i/2,y:o};case Y.Right:return{x:r+i,y:o+s/2};case Y.Bottom:return{x:r+i/2,y:o+s};case Y.Left:return{x:r,y:o+s/2}}}function Er(t,e){return t?t.length===1||!e?t[0]:e&&t.find(n=>n.id===e)||null:null}const il=(t,e,n,r,o,i)=>{const s=_r(n,t,e),c=_r(i,r,o);return{sourceX:s.x,sourceY:s.y,targetX:c.x,targetY:c.y}};function sl({sourcePos:t,targetPos:e,sourceWidth:n,sourceHeight:r,targetWidth:o,targetHeight:i,width:s,height:c,transform:a}){const l={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+n,e.x+o),y2:Math.max(t.y+r,e.y+i)};l.x===l.x2&&(l.x2+=1),l.y===l.y2&&(l.y2+=1);const u=Tn({x:(0-a[0])/a[2],y:(0-a[1])/a[2],width:s/a[2],height:c/a[2]}),f=Math.max(0,Math.min(u.x2,l.x2)-Math.max(u.x,l.x)),h=Math.max(0,Math.min(u.y2,l.y2)-Math.max(u.y,l.y));return Math.ceil(f*h)>0}function Sr(t){var r,o,i,s,c;const e=((r=t==null?void 0:t[tt])==null?void 0:r.handleBounds)||null,n=e&&(t==null?void 0:t.width)&&(t==null?void 0:t.height)&&typeof((o=t==null?void 0:t.positionAbsolute)==null?void 0:o.x)<"u"&&typeof((i=t==null?void 0:t.positionAbsolute)==null?void 0:i.y)<"u";return[{x:((s=t==null?void 0:t.positionAbsolute)==null?void 0:s.x)||0,y:((c=t==null?void 0:t.positionAbsolute)==null?void 0:c.y)||0,width:(t==null?void 0:t.width)||0,height:(t==null?void 0:t.height)||0},e,!!n]}const cl=[{level:0,isMaxLevel:!0,edges:[]}];function al(t,e,n=!1){let r=-1;const o=t.reduce((s,c)=>{var u,f;const a=lt(c.zIndex);let l=a?c.zIndex:0;if(n){const h=e.get(c.target),p=e.get(c.source),v=c.selected||(h==null?void 0:h.selected)||(p==null?void 0:p.selected),m=Math.max(((u=p==null?void 0:p[tt])==null?void 0:u.z)||0,((f=h==null?void 0:h[tt])==null?void 0:f.z)||0,1e3);l=(a?c.zIndex:0)+(v?m:0)}return s[l]?s[l].push(c):s[l]=[c],r=l>r?l:r,s},{}),i=Object.entries(o).map(([s,c])=>{const a=+s;return{edges:c,level:a,isMaxLevel:a===r}});return i.length===0?cl:i}function ul(t,e,n){const r=J(b.useCallback(o=>t?o.edges.filter(i=>{const s=e.get(i.source),c=e.get(i.target);return(s==null?void 0:s.width)&&(s==null?void 0:s.height)&&(c==null?void 0:c.width)&&(c==null?void 0:c.height)&&sl({sourcePos:s.positionAbsolute||{x:0,y:0},targetPos:c.positionAbsolute||{x:0,y:0},sourceWidth:s.width,sourceHeight:s.height,targetWidth:c.width,targetHeight:c.height,width:o.width,height:o.height,transform:o.transform})}):o.edges,[t,e]));return al(r,e,n)}const ll=({color:t="none",strokeWidth:e=1})=>N.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),fl=({color:t="none",strokeWidth:e=1})=>N.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),br={[Ve.Arrow]:ll,[Ve.ArrowClosed]:fl};function dl(t){const e=nt();return b.useMemo(()=>{var o,i;return Object.prototype.hasOwnProperty.call(br,t)?br[t]:((i=(o=e.getState()).onError)==null||i.call(o,"009",At.error009(t)),null)},[t])}const hl=({id:t,type:e,color:n,width:r=12.5,height:o=12.5,markerUnits:i="strokeWidth",strokeWidth:s,orient:c="auto-start-reverse"})=>{const a=dl(e);return a?N.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${r}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:c,refX:"0",refY:"0"},N.createElement(a,{color:n,strokeWidth:s})):null},pl=({defaultColor:t,rfId:e})=>n=>{const r=[];return n.edges.reduce((o,i)=>([i.markerStart,i.markerEnd].forEach(s=>{if(s&&typeof s=="object"){const c=mn(s,e);r.includes(c)||(o.push({id:c,color:s.color||t,...s}),r.push(c))}}),o),[]).sort((o,i)=>o.id.localeCompare(i.id))},Io=({defaultColor:t,rfId:e})=>{const n=J(b.useCallback(pl({defaultColor:t,rfId:e}),[t,e]),(r,o)=>!(r.length!==o.length||r.some((i,s)=>i.id!==o[s].id)));return N.createElement("defs",null,n.map(r=>N.createElement(hl,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};Io.displayName="MarkerDefinitions";var gl=b.memo(Io);const ml=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),ko=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:n,rfId:r,edgeTypes:o,noPanClassName:i,onEdgeContextMenu:s,onEdgeMouseEnter:c,onEdgeMouseMove:a,onEdgeMouseLeave:l,onEdgeClick:u,onEdgeDoubleClick:f,onReconnect:h,onReconnectStart:p,onReconnectEnd:v,reconnectRadius:m,children:_,disableKeyboardA11y:g})=>{const{edgesFocusable:E,edgesUpdatable:A,elementsSelectable:y,width:M,height:$,connectionMode:R,nodeInternals:H,onError:z}=J(ml,ot),B=ul(e,H,n);return M?N.createElement(N.Fragment,null,B.map(({level:P,edges:L,isMaxLevel:V})=>N.createElement("svg",{key:P,style:{zIndex:P},width:M,height:$,className:"react-flow__edges react-flow__container"},V&&N.createElement(gl,{defaultColor:t,rfId:r}),N.createElement("g",null,L.map(d=>{const[S,x,T]=Sr(H.get(d.source)),[I,w,C]=Sr(H.get(d.target));if(!T||!C)return null;let k=d.type||"default";o[k]||(z==null||z("011",At.error011(k)),k="default");const D=o[k]||o.default,O=R===Ot.Strict?w.target:(w.target??[]).concat(w.source??[]),F=Er(x.source,d.sourceHandle),X=Er(O,d.targetHandle),G=(F==null?void 0:F.position)||Y.Bottom,Z=(X==null?void 0:X.position)||Y.Top,K=!!(d.focusable||E&&typeof d.focusable>"u"),j=d.reconnectable||d.updatable,q=typeof h<"u"&&(j||A&&typeof j>"u");if(!F||!X)return z==null||z("008",At.error008(F,d)),null;const{sourceX:ft,sourceY:at,targetX:dt,targetY:ut}=il(S,F,G,I,X,Z);return N.createElement(D,{key:d.id,id:d.id,className:it([d.className,i]),type:k,data:d.data,selected:!!d.selected,animated:!!d.animated,hidden:!!d.hidden,label:d.label,labelStyle:d.labelStyle,labelShowBg:d.labelShowBg,labelBgStyle:d.labelBgStyle,labelBgPadding:d.labelBgPadding,labelBgBorderRadius:d.labelBgBorderRadius,style:d.style,source:d.source,target:d.target,sourceHandleId:d.sourceHandle,targetHandleId:d.targetHandle,markerEnd:d.markerEnd,markerStart:d.markerStart,sourceX:ft,sourceY:at,targetX:dt,targetY:ut,sourcePosition:G,targetPosition:Z,elementsSelectable:y,onContextMenu:s,onMouseEnter:c,onMouseMove:a,onMouseLeave:l,onClick:u,onEdgeDoubleClick:f,onReconnect:h,onReconnectStart:p,onReconnectEnd:v,reconnectRadius:m,rfId:r,ariaLabel:d.ariaLabel,isFocusable:K,isReconnectable:q,pathOptions:"pathOptions"in d?d.pathOptions:void 0,interactionWidth:d.interactionWidth,disableKeyboardA11y:g})})))),_):null};ko.displayName="EdgeRenderer";var yl=b.memo(ko);const wl=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function xl({children:t}){const e=J(wl);return N.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}function vl(t){const e=Pn(),n=b.useRef(!1);b.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const _l={[Y.Left]:Y.Right,[Y.Right]:Y.Left,[Y.Top]:Y.Bottom,[Y.Bottom]:Y.Top},Do=({nodeId:t,handleType:e,style:n,type:r=Mt.Bezier,CustomComponent:o,connectionStatus:i})=>{var $,R,H;const{fromNode:s,handleId:c,toX:a,toY:l,connectionMode:u}=J(b.useCallback(z=>({fromNode:z.nodeInternals.get(t),handleId:z.connectionHandleId,toX:(z.connectionPosition.x-z.transform[0])/z.transform[2],toY:(z.connectionPosition.y-z.transform[1])/z.transform[2],connectionMode:z.connectionMode}),[t]),ot),f=($=s==null?void 0:s[tt])==null?void 0:$.handleBounds;let h=f==null?void 0:f[e];if(u===Ot.Loose&&(h=h||(f==null?void 0:f[e==="source"?"target":"source"])),!s||!h)return null;const p=c?h.find(z=>z.id===c):h[0],v=p?p.x+p.width/2:(s.width??0)/2,m=p?p.y+p.height/2:s.height??0,_=(((R=s.positionAbsolute)==null?void 0:R.x)??0)+v,g=(((H=s.positionAbsolute)==null?void 0:H.y)??0)+m,E=p==null?void 0:p.position,A=E?_l[E]:null;if(!E||!A)return null;if(o)return N.createElement(o,{connectionLineType:r,connectionLineStyle:n,fromNode:s,fromHandle:p,fromX:_,fromY:g,toX:a,toY:l,fromPosition:E,toPosition:A,connectionStatus:i});let y="";const M={sourceX:_,sourceY:g,sourcePosition:E,targetX:a,targetY:l,targetPosition:A};return r===Mt.Bezier?[y]=oo(M):r===Mt.Step?[y]=gn({...M,borderRadius:0}):r===Mt.SmoothStep?[y]=gn(M):r===Mt.SimpleBezier?[y]=ro(M):y=`M${_},${g} ${a},${l}`,N.createElement("path",{d:y,fill:"none",className:"react-flow__connection-path",style:n})};Do.displayName="ConnectionLine";const El=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function Sl({containerStyle:t,style:e,type:n,component:r}){const{nodeId:o,handleType:i,nodesConnectable:s,width:c,height:a,connectionStatus:l}=J(El,ot);return!(o&&i&&c&&s)?null:N.createElement("svg",{style:t,width:c,height:a,className:"react-flow__edges react-flow__connectionline react-flow__container"},N.createElement("g",{className:it(["react-flow__connection",l])},N.createElement(Do,{nodeId:o,handleType:i,style:e,type:n,CustomComponent:r,connectionStatus:l})))}function Nr(t,e){return b.useRef(null),nt(),b.useMemo(()=>e(t),[t])}const Ro=({nodeTypes:t,edgeTypes:e,onMove:n,onMoveStart:r,onMoveEnd:o,onInit:i,onNodeClick:s,onEdgeClick:c,onNodeDoubleClick:a,onEdgeDoubleClick:l,onNodeMouseEnter:u,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:p,onSelectionContextMenu:v,onSelectionStart:m,onSelectionEnd:_,connectionLineType:g,connectionLineStyle:E,connectionLineComponent:A,connectionLineContainerStyle:y,selectionKeyCode:M,selectionOnDrag:$,selectionMode:R,multiSelectionKeyCode:H,panActivationKeyCode:z,zoomActivationKeyCode:B,deleteKeyCode:P,onlyRenderVisibleElements:L,elementsSelectable:V,selectNodesOnDrag:d,defaultViewport:S,translateExtent:x,minZoom:T,maxZoom:I,preventScrolling:w,defaultMarkerColor:C,zoomOnScroll:k,zoomOnPinch:D,panOnScroll:O,panOnScrollSpeed:F,panOnScrollMode:X,zoomOnDoubleClick:G,panOnDrag:Z,onPaneClick:K,onPaneMouseEnter:j,onPaneMouseMove:q,onPaneMouseLeave:ft,onPaneScroll:at,onPaneContextMenu:dt,onEdgeContextMenu:ut,onEdgeMouseEnter:et,onEdgeMouseMove:yt,onEdgeMouseLeave:Q,onReconnect:U,onReconnectStart:st,onReconnectEnd:It,reconnectRadius:ie,noDragClassName:Yt,noWheelClassName:Ut,noPanClassName:_t,elevateEdgesOnSelect:Xt,disableKeyboardA11y:kt,nodeOrigin:Dt,nodeExtent:Wt,rfId:Gt})=>{const se=Nr(t,Qu),rt=Nr(e,ol);return vl(i),N.createElement(Ku,{onPaneClick:K,onPaneMouseEnter:j,onPaneMouseMove:q,onPaneMouseLeave:ft,onPaneContextMenu:dt,onPaneScroll:at,deleteKeyCode:P,selectionKeyCode:M,selectionOnDrag:$,selectionMode:R,onSelectionStart:m,onSelectionEnd:_,multiSelectionKeyCode:H,panActivationKeyCode:z,zoomActivationKeyCode:B,elementsSelectable:V,onMove:n,onMoveStart:r,onMoveEnd:o,zoomOnScroll:k,zoomOnPinch:D,zoomOnDoubleClick:G,panOnScroll:O,panOnScrollSpeed:F,panOnScrollMode:X,panOnDrag:Z,defaultViewport:S,translateExtent:x,minZoom:T,maxZoom:I,onSelectionContextMenu:v,preventScrolling:w,noDragClassName:Yt,noWheelClassName:Ut,noPanClassName:_t,disableKeyboardA11y:kt},N.createElement(xl,null,N.createElement(yl,{edgeTypes:rt,onEdgeClick:c,onEdgeDoubleClick:l,onlyRenderVisibleElements:L,onEdgeContextMenu:ut,onEdgeMouseEnter:et,onEdgeMouseMove:yt,onEdgeMouseLeave:Q,onReconnect:U,onReconnectStart:st,onReconnectEnd:It,reconnectRadius:ie,defaultMarkerColor:C,noPanClassName:_t,elevateEdgesOnSelect:!!Xt,disableKeyboardA11y:kt,rfId:Gt},N.createElement(Sl,{style:E,type:g,component:A,containerStyle:y})),N.createElement("div",{className:"react-flow__edgelabel-renderer"}),N.createElement(tl,{nodeTypes:se,onNodeClick:s,onNodeDoubleClick:a,onNodeMouseEnter:u,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:p,selectNodesOnDrag:d,onlyRenderVisibleElements:L,noPanClassName:_t,noDragClassName:Yt,disableKeyboardA11y:kt,nodeOrigin:Dt,nodeExtent:Wt,rfId:Gt})))};Ro.displayName="GraphView";var bl=b.memo(Ro);const vn=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Ct={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:vn,nodeExtent:vn,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Ot.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:Qa,isValidConnection:void 0},Nl=()=>Pi((t,e)=>({...Ct,setNodes:n=>{const{nodeInternals:r,nodeOrigin:o,elevateNodesOnSelect:i}=e();t({nodeInternals:rn(n,r,o,i)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=e();t({edges:n.map(o=>({...r,...o}))})},setDefaultNodesAndEdges:(n,r)=>{const o=typeof n<"u",i=typeof r<"u",s=o?rn(n,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:s,edges:i?r:[],hasDefaultNodes:o,hasDefaultEdges:i})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:o,fitViewOnInit:i,fitViewOnInitDone:s,fitViewOnInitOptions:c,domNode:a,nodeOrigin:l}=e(),u=a==null?void 0:a.querySelector(".react-flow__viewport");if(!u)return;const f=window.getComputedStyle(u),{m22:h}=new window.DOMMatrixReadOnly(f.transform),p=n.reduce((m,_)=>{const g=o.get(_.id);if(g!=null&&g.hidden)o.set(g.id,{...g,[tt]:{...g[tt],handleBounds:void 0}});else if(g){const E=An(_.nodeElement);!!(E.width&&E.height&&(g.width!==E.width||g.height!==E.height||_.forceUpdate))&&(o.set(g.id,{...g,[tt]:{...g[tt],handleBounds:{source:wr(".source",_.nodeElement,h,l),target:wr(".target",_.nodeElement,h,l)}},...E}),m.push({id:g.id,type:"dimensions",dimensions:E}))}return m},[]);So(o,l);const v=s||i&&!s&&bo(e,{initial:!0,...c});t({nodeInternals:new Map(o),fitViewOnInitDone:v}),(p==null?void 0:p.length)>0&&(r==null||r(p))},updateNodePositions:(n,r=!0,o=!1)=>{const{triggerNodeChanges:i}=e(),s=n.map(c=>{const a={id:c.id,type:"position",dragging:o};return r&&(a.positionAbsolute=c.positionAbsolute,a.position=c.position),a});i(s)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:o,hasDefaultNodes:i,nodeOrigin:s,getNodes:c,elevateNodesOnSelect:a}=e();if(n!=null&&n.length){if(i){const l=Lu(n,c()),u=rn(l,o,s,a);t({nodeInternals:u})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:o,getNodes:i}=e();let s,c=null;r?s=n.map(a=>Tt(a,!0)):(s=Jt(i(),n),c=Jt(o,[])),Ce({changedNodes:s,changedEdges:c,get:e,set:t})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:o,getNodes:i}=e();let s,c=null;r?s=n.map(a=>Tt(a,!0)):(s=Jt(o,n),c=Jt(i(),[])),Ce({changedNodes:c,changedEdges:s,get:e,set:t})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:o,getNodes:i}=e(),s=n||i(),c=r||o,a=s.map(u=>(u.selected=!1,Tt(u.id,!1))),l=c.map(u=>Tt(u.id,!1));Ce({changedNodes:a,changedEdges:l,get:e,set:t})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:o}=e();r==null||r.scaleExtent([n,o]),t({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:o}=e();r==null||r.scaleExtent([o,n]),t({maxZoom:n})},setTranslateExtent:n=>{var r;(r=e().d3Zoom)==null||r.translateExtent(n),t({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=e(),i=r().filter(c=>c.selected).map(c=>Tt(c.id,!1)),s=n.filter(c=>c.selected).map(c=>Tt(c.id,!1));Ce({changedNodes:i,changedEdges:s,get:e,set:t})},setNodeExtent:n=>{const{nodeInternals:r}=e();r.forEach(o=>{o.positionAbsolute=Cn(o.position,n)}),t({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:o,height:i,d3Zoom:s,d3Selection:c,translateExtent:a}=e();if(!s||!c||!n.x&&!n.y)return!1;const l=$t.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),u=[[0,0],[o,i]],f=s==null?void 0:s.constrain()(l,u,a);return s.transform(c,f),r[0]!==f.x||r[1]!==f.y||r[2]!==f.k},cancelConnection:()=>t({connectionNodeId:Ct.connectionNodeId,connectionHandleId:Ct.connectionHandleId,connectionHandleType:Ct.connectionHandleType,connectionStatus:Ct.connectionStatus,connectionStartHandle:Ct.connectionStartHandle,connectionEndHandle:Ct.connectionEndHandle}),reset:()=>t({...Ct})}),Object.is),Po=({children:t})=>{const e=b.useRef(null);return e.current||(e.current=Nl()),N.createElement(Ya,{value:e.current},t)};Po.displayName="ReactFlowProvider";const Ho=({children:t})=>b.useContext(Xe)?N.createElement(N.Fragment,null,t):N.createElement(Po,null,t);Ho.displayName="ReactFlowWrapper";const Al={input:mo,default:wn,output:wo,group:Rn},Cl={default:Be,straight:zn,step:$n,smoothstep:We,simplebezier:Mn},Tl=[0,0],Ml=[15,15],$l={x:0,y:0,zoom:1},zl={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Il=b.forwardRef(({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,className:o,nodeTypes:i=Al,edgeTypes:s=Cl,onNodeClick:c,onEdgeClick:a,onInit:l,onMove:u,onMoveStart:f,onMoveEnd:h,onConnect:p,onConnectStart:v,onConnectEnd:m,onClickConnectStart:_,onClickConnectEnd:g,onNodeMouseEnter:E,onNodeMouseMove:A,onNodeMouseLeave:y,onNodeContextMenu:M,onNodeDoubleClick:$,onNodeDragStart:R,onNodeDrag:H,onNodeDragStop:z,onNodesDelete:B,onEdgesDelete:P,onSelectionChange:L,onSelectionDragStart:V,onSelectionDrag:d,onSelectionDragStop:S,onSelectionContextMenu:x,onSelectionStart:T,onSelectionEnd:I,connectionMode:w=Ot.Strict,connectionLineType:C=Mt.Bezier,connectionLineStyle:k,connectionLineComponent:D,connectionLineContainerStyle:O,deleteKeyCode:F="Backspace",selectionKeyCode:X="Shift",selectionOnDrag:G=!1,selectionMode:Z=xe.Full,panActivationKeyCode:K="Space",multiSelectionKeyCode:j=He()?"Meta":"Control",zoomActivationKeyCode:q=He()?"Meta":"Control",snapToGrid:ft=!1,snapGrid:at=Ml,onlyRenderVisibleElements:dt=!1,selectNodesOnDrag:ut=!0,nodesDraggable:et,nodesConnectable:yt,nodesFocusable:Q,nodeOrigin:U=Tl,edgesFocusable:st,edgesUpdatable:It,elementsSelectable:ie,defaultViewport:Yt=$l,minZoom:Ut=.5,maxZoom:_t=2,translateExtent:Xt=vn,preventScrolling:kt=!0,nodeExtent:Dt,defaultMarkerColor:Wt="#b1b1b7",zoomOnScroll:Gt=!0,zoomOnPinch:se=!0,panOnScroll:rt=!1,panOnScrollSpeed:ht=.5,panOnScrollMode:Rt=Lt.Free,zoomOnDoubleClick:Pt=!0,panOnDrag:Ht=!0,onPaneClick:Et,onPaneMouseEnter:wt,onPaneMouseMove:ce,onPaneMouseLeave:Ge,onPaneScroll:ae,onPaneContextMenu:Ze,children:Vn,onEdgeContextMenu:Vt,onEdgeDoubleClick:Lo,onEdgeMouseEnter:Fo,onEdgeMouseMove:Oo,onEdgeMouseLeave:Yo,onEdgeUpdate:Uo,onEdgeUpdateStart:Xo,onEdgeUpdateEnd:Wo,onReconnect:Go,onReconnectStart:Zo,onReconnectEnd:Ko,reconnectRadius:qo=10,edgeUpdaterRadius:Qo=10,onNodesChange:Jo,onEdgesChange:jo,noDragClassName:ti="nodrag",noWheelClassName:ei="nowheel",noPanClassName:Bn="nopan",fitView:ni=!1,fitViewOptions:ri,connectOnClick:oi=!0,attributionPosition:ii,proOptions:si,defaultEdgeOptions:ci,elevateNodesOnSelect:ai=!0,elevateEdgesOnSelect:ui=!1,disableKeyboardA11y:Ln=!1,autoPanOnConnect:li=!0,autoPanOnNodeDrag:fi=!0,connectionRadius:di=20,isValidConnection:hi,onError:pi,style:gi,id:Fn,nodeDragThreshold:mi,...yi},wi)=>{const Ke=Fn||"1";return N.createElement("div",{...yi,style:{...gi,...zl},ref:wi,className:it(["react-flow",o]),"data-testid":"rf__wrapper",id:Fn},N.createElement(Ho,null,N.createElement(bl,{onInit:l,onMove:u,onMoveStart:f,onMoveEnd:h,onNodeClick:c,onEdgeClick:a,onNodeMouseEnter:E,onNodeMouseMove:A,onNodeMouseLeave:y,onNodeContextMenu:M,onNodeDoubleClick:$,nodeTypes:i,edgeTypes:s,connectionLineType:C,connectionLineStyle:k,connectionLineComponent:D,connectionLineContainerStyle:O,selectionKeyCode:X,selectionOnDrag:G,selectionMode:Z,deleteKeyCode:F,multiSelectionKeyCode:j,panActivationKeyCode:K,zoomActivationKeyCode:q,onlyRenderVisibleElements:dt,selectNodesOnDrag:ut,defaultViewport:Yt,translateExtent:Xt,minZoom:Ut,maxZoom:_t,preventScrolling:kt,zoomOnScroll:Gt,zoomOnPinch:se,zoomOnDoubleClick:Pt,panOnScroll:rt,panOnScrollSpeed:ht,panOnScrollMode:Rt,panOnDrag:Ht,onPaneClick:Et,onPaneMouseEnter:wt,onPaneMouseMove:ce,onPaneMouseLeave:Ge,onPaneScroll:ae,onPaneContextMenu:Ze,onSelectionContextMenu:x,onSelectionStart:T,onSelectionEnd:I,onEdgeContextMenu:Vt,onEdgeDoubleClick:Lo,onEdgeMouseEnter:Fo,onEdgeMouseMove:Oo,onEdgeMouseLeave:Yo,onReconnect:Go??Uo,onReconnectStart:Zo??Xo,onReconnectEnd:Ko??Wo,reconnectRadius:qo??Qo,defaultMarkerColor:Wt,noDragClassName:ti,noWheelClassName:ei,noPanClassName:Bn,elevateEdgesOnSelect:ui,rfId:Ke,disableKeyboardA11y:Ln,nodeOrigin:U,nodeExtent:Dt}),N.createElement(vu,{nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:p,onConnectStart:v,onConnectEnd:m,onClickConnectStart:_,onClickConnectEnd:g,nodesDraggable:et,nodesConnectable:yt,nodesFocusable:Q,edgesFocusable:st,edgesUpdatable:It,elementsSelectable:ie,elevateNodesOnSelect:ai,minZoom:Ut,maxZoom:_t,nodeExtent:Dt,onNodesChange:Jo,onEdgesChange:jo,snapToGrid:ft,snapGrid:at,connectionMode:w,translateExtent:Xt,connectOnClick:oi,defaultEdgeOptions:ci,fitView:ni,fitViewOptions:ri,onNodesDelete:B,onEdgesDelete:P,onNodeDragStart:R,onNodeDrag:H,onNodeDragStop:z,onSelectionDrag:d,onSelectionDragStart:V,onSelectionDragStop:S,noPanClassName:Bn,nodeOrigin:U,rfId:Ke,autoPanOnConnect:li,autoPanOnNodeDrag:fi,onError:pi,connectionRadius:di,isValidConnection:hi,nodeDragThreshold:mi}),N.createElement(wu,{onSelectionChange:L}),Vn,N.createElement(Xa,{proOptions:si,position:ii}),N.createElement(Nu,{rfId:Ke,disableKeyboardA11y:Ln})))});Il.displayName="ReactFlow";function kl(){return N.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},N.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function Dl(){return N.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},N.createElement("path",{d:"M0 0h32v4.2H0z"}))}function Rl(){return N.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},N.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function Pl(){return N.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},N.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function Hl(){return N.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},N.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const me=({children:t,className:e,...n})=>N.createElement("button",{type:"button",className:it(["react-flow__controls-button",e]),...n},t);me.displayName="ControlButton";const Vl=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),Vo=({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:o,onZoomIn:i,onZoomOut:s,onFitView:c,onInteractiveChange:a,className:l,children:u,position:f="bottom-left"})=>{const h=nt(),[p,v]=b.useState(!1),{isInteractive:m,minZoomReached:_,maxZoomReached:g}=J(Vl,ot),{zoomIn:E,zoomOut:A,fitView:y}=Pn();if(b.useEffect(()=>{v(!0)},[]),!p)return null;const M=()=>{E(),i==null||i()},$=()=>{A(),s==null||s()},R=()=>{y(o),c==null||c()},H=()=>{h.setState({nodesDraggable:!m,nodesConnectable:!m,elementsSelectable:!m}),a==null||a(!m)};return N.createElement(qr,{className:it(["react-flow__controls",l]),position:f,style:t,"data-testid":"rf__controls"},e&&N.createElement(N.Fragment,null,N.createElement(me,{onClick:M,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:g},N.createElement(kl,null)),N.createElement(me,{onClick:$,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:_},N.createElement(Dl,null))),n&&N.createElement(me,{className:"react-flow__controls-fitview",onClick:R,title:"fit view","aria-label":"fit view"},N.createElement(Rl,null)),r&&N.createElement(me,{className:"react-flow__controls-interactive",onClick:H,title:"toggle interactivity","aria-label":"toggle interactivity"},m?N.createElement(Hl,null):N.createElement(Pl,null)),u)};Vo.displayName="Controls";var Wl=b.memo(Vo),gt;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(gt||(gt={}));function Bl({color:t,dimensions:e,lineWidth:n}){return N.createElement("path",{stroke:t,strokeWidth:n,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})}function Ll({color:t,radius:e}){return N.createElement("circle",{cx:e,cy:e,r:e,fill:t})}const Fl={[gt.Dots]:"#91919a",[gt.Lines]:"#eee",[gt.Cross]:"#e2e2e2"},Ol={[gt.Dots]:1,[gt.Lines]:1,[gt.Cross]:6},Yl=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function Bo({id:t,variant:e=gt.Dots,gap:n=20,size:r,lineWidth:o=1,offset:i=2,color:s,style:c,className:a}){const l=b.useRef(null),{transform:u,patternId:f}=J(Yl,ot),h=s||Fl[e],p=r||Ol[e],v=e===gt.Dots,m=e===gt.Cross,_=Array.isArray(n)?n:[n,n],g=[_[0]*u[2]||1,_[1]*u[2]||1],E=p*u[2],A=m?[E,E]:g,y=v?[E/i,E/i]:[A[0]/i,A[1]/i];return N.createElement("svg",{className:it(["react-flow__background",a]),style:{...c,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:l,"data-testid":"rf__background"},N.createElement("pattern",{id:f+t,x:u[0]%g[0],y:u[1]%g[1],width:g[0],height:g[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${y[0]},-${y[1]})`},v?N.createElement(Ll,{color:h,radius:E/i}):N.createElement(Bl,{dimensions:A,color:h,lineWidth:o})),N.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${f+t})`}))}Bo.displayName="Background";var Gl=b.memo(Bo);export{Gl as B,Wl as C,Po as R,Il as a};
//# sourceMappingURL=flow-vJ2DfBx3.js.map
